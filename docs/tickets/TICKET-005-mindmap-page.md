# TICKET-005: マインドマップページの実装

## チケット情報
- **ID**: TICKET-005
- **タイプ**: 機能
- **優先度**: 高
- **ステータス**: 未着手
- **担当者**: -
- **作成日**: 2024-09-04
- **更新日**: 2024-09-04

## 概要
日記エントリーから自動生成される質問ノードを含むインタラクティブなマインドマップビューの実装。

## 詳細説明
日記送信後に自動遷移し、AIが生成した関連質問がノードとして表示される。過去の日記と質問も閲覧可能で、任意のタイミングで質問に回答できる。

## タスク一覧
### 基本機能
- [ ] マインドマップライブラリの選定（React Flow推奨）
- [ ] ノードとエッジの描画機能
- [ ] ズーム・パン機能の実装
- [ ] ノードの配置アルゴリズム実装

### ノード機能
- [ ] 日記ノードの表示
- [ ] 質問ノードの自動生成と表示
- [ ] 回答ノードの追加機能
- [ ] ノードのクリックで詳細表示
- [ ] ノードの色分け（タイプ別）

### 検索・フィルター
- [ ] キーワード検索機能
- [ ] 日付範囲フィルター
- [ ] カテゴリーフィルター
- [ ] 未回答質問のハイライト

### データ管理
- [ ] 過去の日記の読み込み
- [ ] 質問への回答保存（タイムスタンプ付き）
- [ ] マインドマップの状態保存

## 技術仕様
### ライブラリ選定
```json
{
  "dependencies": {
    "reactflow": "^11.x",
    "@reactflow/node-resizer": "^2.x",
    "dagre": "^0.8.x"  // 自動レイアウト用
  }
}
```

### ノードタイプ
```typescript
enum NodeType {
  DIARY = 'diary',        // 日記エントリー
  QUESTION = 'question',  // AI生成質問
  ANSWER = 'answer',      // ユーザー回答
  CATEGORY = 'category'   // カテゴリーノード
}

interface MindmapNode {
  id: string
  type: NodeType
  data: {
    content: string
    timestamp: Date
    isAnswered?: boolean
    emotion?: EmotionData
  }
  position: { x: number; y: number }
}
```

### AI質問生成
- 日記の内容を分析
- 感情、出来事、人間関係などのトピックを抽出
- 各トピックに対して深掘り質問を生成

## 受け入れ条件
- [ ] マインドマップが正しく表示される
- [ ] 質問ノードが自動生成される
- [ ] 過去の質問に回答可能
- [ ] 検索機能が動作する
- [ ] パフォーマンス（1000ノードでもスムーズ）

## 関連チケット
- TICKET-004: 日記入力機能の実装
- TICKET-006: AI質問生成機能
- TICKET-015: マインドマップ結合機能

## 備考
ノードの配置はdagreアルゴリズムで自動化し、ユーザーは手動で調整も可能にする。