# TICKET-004: 日記入力機能の実装

## チケット情報
- **ID**: TICKET-004
- **タイプ**: 機能
- **優先度**: 高
- **ステータス**: 未着手
- **担当者**: -
- **作成日**: 2024-09-04
- **更新日**: 2024-09-04

## 概要
シンプルで洗練された日記入力画面の実装と、通常モード・対話モードの切り替え機能。

## 詳細説明
ユーザーが日記を書き殴れる通常モードと、AIが質問しながら導く対話モードを実装。送信後は自動的にマインドマップページへ遷移。

## タスク一覧
### 基本機能
- [ ] リッチテキストエディターの実装
- [ ] 自動保存機能（30秒ごと）
- [ ] 画像アップロード機能（ドラッグ&ドロップ対応）
- [ ] 日時の自動記録
- [ ] 送信ボタンの実装

### 対話モード
- [ ] モード切り替えUIの実装
- [ ] 対話開始の決まり文句設定
- [ ] AIによる質問生成機能
- [ ] 回答に基づく追加質問の生成
- [ ] 対話履歴から日記を生成

### データ保存
- [ ] テキストデータのDB保存
- [ ] 画像データのDB保存
- [ ] 記入日時のタイムスタンプ保存

## 技術仕様
### UIコンポーネント
```tsx
// 日記エディターコンポーネント
interface DiaryEditorProps {
  mode: 'freewrite' | 'interactive'
  onSubmit: (entry: DiaryEntry) => void
}

// 対話モードのプロンプト例
const interactivePrompts = [
  "今日はどんな一日でしたか？",
  "その時どんな風に感じましたか？",
  "次はどうしたいですか？",
  "今日一番印象に残ったことは何ですか？"
]
```

### エディター機能
- Markdownサポート
- リアルタイムプレビュー
- 画像のインライン表示
- 文字数カウント
- 下書き保存

## 受け入れ条件
- [ ] 日記の入力と保存が可能
- [ ] 画像のアップロードが機能
- [ ] 対話モードでAIの質問に答えられる
- [ ] 送信後マインドマップページへ自動遷移
- [ ] 自動保存が動作する

## 関連チケット
- TICKET-005: マインドマップページの実装
- TICKET-012: AI対話機能の実装

## 備考
対話モードは日記を書く習慣がない人向けの機能。AIの質問は過去の日記内容を参考に個人化される。