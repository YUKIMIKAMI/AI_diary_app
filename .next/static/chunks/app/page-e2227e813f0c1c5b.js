(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{20683:(e,t,r)=>{"use strict";r.d(t,{MetricsDashboard:()=>f});var a=r(95155),s=r(12115),n=r(95704);function o(){return n.env.VERCEL,"demo"}let l={mode:o(),api:{useRealAPI:"development"===o(),openaiKey:n.env.OPENAI_API_KEY,googleKey:n.env.GOOGLE_API_KEY},rateLimit:{enabled:"development"!==o(),maxRequestsPerHour:100,maxRequestsPerDay:500},database:{enabled:"development"===o(),url:n.env.DATABASE_URL},features:{realTimeAI:"development"===o(),dataExport:"development"===o(),advancedAnalytics:"development"===o(),wandb:"development"===o()&&"73288f9566f3a99386ad2037ccef5f5732dc1f82"},ui:{showDemoNotice:"demo"===o(),showDevTools:"development"===o()}},i={projectName:"mindflow-ai-diary",entity:"mikami-052999-musha",apiKey:"73288f9566f3a99386ad2037ccef5f5732dc1f82",enabled:l.features.wandb&&"73288f9566f3a99386ad2037ccef5f5732dc1f82"};class d{log(e){let t={...e,timestamp:Date.now(),sessionDuration:Date.now()-this.sessionStartTime};this.logs.push(t),"development"===l.mode&&console.log("\uD83D\uDCCA W&B Metrics:",t),i.enabled&&this.sendToWandb(t)}logResponseTime(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gpt-3.5-turbo",r=Date.now()-e;this.log({responseTime:r,modelName:t})}logEmotionAnalysis(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.85;this.log({emotionScore:e,dominantEmotion:t[0],emotionConfidence:r,emotionAccuracy:100*r})}logConversation(e,t){this.log({conversationLength:e,userSatisfaction:t||e>3?4:3,responseRelevance:.9})}logError(e){let t=this.logs.filter(e=>e.apiCalls).length+1,r=this.logs.filter(e=>e.errorRate).length+1;this.log({errorRate:r/t*100,apiCalls:t})}logCacheHit(e){let t=this.logs.filter(e=>void 0!==e.cacheHitRate),r=t.filter(e=>e.cacheHitRate>0).length+ +!!e,a=t.length+1;this.log({cacheHitRate:r/a*100})}async sendToWandb(e){try{let t=await fetch("https://api.wandb.ai/graphql",{method:"POST",headers:{Authorization:"Bearer ".concat(i.apiKey),"Content-Type":"application/json"},body:JSON.stringify({query:"\n            mutation LogMetrics($projectName: String!, $metrics: JSON!) {\n              logMetrics(project: $projectName, metrics: $metrics) {\n                success\n              }\n            }\n          ",variables:{projectName:i.projectName,metrics:e}})});t.ok||console.error("W&B送信失敗:",t.statusText)}catch(e){console.error("W&B送信エラー:",e)}}generateReport(){let e=this.logs.filter(e=>e.responseTime).reduce((e,t)=>e+t.responseTime,0)/this.logs.length||0,t=this.logs.filter(e=>e.emotionScore).reduce((e,t)=>e+t.emotionScore,0)/this.logs.length||0,r=this.logs.filter(e=>e.errorRate).reduce((e,t)=>e+t.errorRate,0)/this.logs.length||0;return{totalLogs:this.logs.length,avgResponseTime:Math.round(e),avgEmotionScore:t.toFixed(1),errorRate:r.toFixed(2),sessionDuration:Math.round((Date.now()-this.sessionStartTime)/1e3),timestamp:new Date().toISOString()}}clear(){this.logs=[],this.sessionStartTime=Date.now()}constructor(){this.logs=[],this.sessionStartTime=Date.now()}}let c=new d,m=s.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}),g=s.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}),h=s.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}),x=s.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}),u=s.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"}))}),p=s.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))});function f(){let[e,t]=(0,s.useState)(null),[r,n]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{let e=()=>{t(c.generateReport()),n(!1)};e();let r=setInterval(e,5e3);return()=>clearInterval(r)},[]),r)?(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-4"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-5/6"})]})]})}):e&&0!==e.totalLogs?(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"\uD83D\uDCCA AI パフォーマンスメトリクス"}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(e.timestamp).toLocaleTimeString()})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(m,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),(0,a.jsxs)("span",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:[e.avgResponseTime,"ms"]})]}),(0,a.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-2",children:"平均応答時間"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(g,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),(0,a.jsxs)("span",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[e.avgEmotionScore,"/5"]})]}),(0,a.jsx)("p",{className:"text-sm text-purple-700 dark:text-purple-300 mt-2",children:"感情スコア"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(h,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:e.totalLogs})]}),(0,a.jsx)("p",{className:"text-sm text-green-700 dark:text-green-300 mt-2",children:"対話回数"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(x,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),(0,a.jsxs)("span",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:[e.errorRate,"%"]})]}),(0,a.jsx)("p",{className:"text-sm text-orange-700 dark:text-orange-300 mt-2",children:"エラー率"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(u,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"}),(0,a.jsxs)("span",{className:"text-2xl font-bold text-indigo-900 dark:text-indigo-100",children:[Math.floor(e.sessionDuration/60),"分"]})]}),(0,a.jsx)("p",{className:"text-sm text-indigo-700 dark:text-indigo-300 mt-2",children:"セッション時間"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(p,{className:"w-5 h-5 text-pink-600 dark:text-pink-400"}),(0,a.jsx)("span",{className:"text-xl font-bold text-pink-900 dark:text-pink-100",children:"W&B"})]}),(0,a.jsx)("p",{className:"text-sm text-pink-700 dark:text-pink-300 mt-2",children:"統合済み"})]})]}),(0,a.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["このデータはWeights & Biasesに記録され、AI精度の継続的な改善に活用されます。"," (本番モード)"]})})]}):(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"\uD83D\uDCCA AI パフォーマンスメトリクス"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"まだメトリクスデータがありません。AIとの対話を開始すると、ここに統計が表示されます。"})]})}},72491:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,52619,23)),Promise.resolve().then(r.bind(r,20683))}},e=>{e.O(0,[619,441,255,977],()=>e(e.s=72491)),_N_E=e.O()}]);