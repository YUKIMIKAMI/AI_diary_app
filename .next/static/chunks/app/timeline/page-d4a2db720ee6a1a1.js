(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[404],{1524:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},16485:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},19404:(e,t,a)=>{Promise.resolve().then(a.bind(a,87165))},26983:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},27278:(e,t,a)=>{"use strict";a.d(t,{$:()=>c});var r=a(95155),s=a(12115),l=a(46673),d=a(83101),i=a(2821),n=a(75889);let o=(0,d.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary-500 text-white hover:bg-primary-600",destructive:"bg-red-500 text-white hover:bg-red-600",outline:"border border-gray-300 bg-transparent hover:bg-gray-100 dark:border-gray-600 dark:hover:bg-gray-800",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-100 dark:hover:bg-gray-700",ghost:"hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-gray-800 dark:hover:text-gray-100",link:"text-primary-500 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:a,variant:s,size:d,asChild:c=!1,...h}=e,x=c?l.DX:"button";return(0,r.jsx)(x,{className:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,i.$)(t))}(o({variant:s,size:d,className:a})),ref:t,...h})});c.displayName="Button"},27937:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},66955:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},83457:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},87165:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var r=a(95155),s=a(12115),l=a(71847);let d=(0,l.A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var i=a(83457),n=a(1524);let o=(0,l.A)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);var c=a(66955),h=a(26983),x=a(90368),g=a(27937),m=a(16485),u=a(27278),y=a(77007),p=a(55041);function b(){let[e,t]=(0,s.useState)([]),[a,l]=(0,s.useState)([]),[b,v]=(0,s.useState)("1year"),[j,k]=(0,s.useState)(""),[f,w]=(0,s.useState)(""),[N,D]=(0,s.useState)(""),[A,M]=(0,s.useState)(0),[S,E]=(0,s.useState)(!1),[C,F]=(0,s.useState)([]);(0,s.useEffect)(()=>{H()},[]);let H=async()=>{try{let e=await fetch("/api/diary");if(e.ok){let a=await e.json();t(a);let r=new Set;a.forEach(e=>{e.tags&&Array.isArray(e.tags)&&e.tags.forEach(e=>r.add(e))}),F(Array.from(r)),_(a,b,j,f,N)}}catch(e){console.error("日記データの取得に失敗:",e)}},_=(e,t,a,r,s)=>{let d=new Date,i=new Date;switch(t){case"1month":i.setMonth(d.getMonth()-1);break;case"3months":i.setMonth(d.getMonth()-3);break;case"1year":i.setFullYear(d.getFullYear()-1);break;case"5years":i.setFullYear(d.getFullYear()-5);break;case"all":i=new Date(0)}let n=e.filter(e=>new Date(e.entryDate)>=i);a&&(n=n.filter(e=>e.tags&&e.tags.includes(a))),r&&(n=n.filter(e=>e.mood===r)),s&&(n=n.filter(e=>{let t=e.emotionScore||0;switch(s){case"positive":return t>=4;case"neutral":return t>=2.5&&t<4;case"negative":return t>0&&t<2.5;default:return!0}})),n.sort((e,t)=>new Date(t.entryDate).getTime()-new Date(e.entryDate).getTime()),l(n.map(e=>{let t=(e.content?e.content.length:0)>200||e.emotionScore&&e.emotionScore>=4;return{id:e.id,date:new Date(e.entryDate),content:e.content||"",mood:e.mood,tags:e.tags||[],isHighlight:t,emotionScore:e.emotionScore}})),M(0)};(0,s.useEffect)(()=>{_(e,b,j,f,N)},[b,j,f,N,e]);let z=e=>{E(!0),setTimeout(()=>{"next"===e&&A<a.length-1?M(A+1):"prev"===e&&A>0&&M(A-1),E(!1)},150)},L=a[A];return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 dark:from-gray-900 dark:via-purple-900/20 dark:to-gray-900",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"タイムライン"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"過去の日記を振り返り、成長の軌跡を辿る"})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)(c.A,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"フィルター"})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"期間"}),(0,r.jsxs)("select",{value:b,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,r.jsx)("option",{value:"1month",children:"過去1ヶ月"}),(0,r.jsx)("option",{value:"3months",children:"過去3ヶ月"}),(0,r.jsx)("option",{value:"1year",children:"過去1年"}),(0,r.jsx)("option",{value:"5years",children:"過去5年"}),(0,r.jsx)("option",{value:"all",children:"全期間"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"タグ"}),(0,r.jsxs)("select",{value:j,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,r.jsx)("option",{value:"",children:"すべて"}),C.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"気分（手動入力）"}),(0,r.jsxs)("select",{value:f,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,r.jsx)("option",{value:"",children:"すべて"}),(0,r.jsx)("option",{value:"happy",children:"\uD83D\uDE0A 嬉しい"}),(0,r.jsx)("option",{value:"sad",children:"\uD83D\uDE22 悲しい"}),(0,r.jsx)("option",{value:"angry",children:"\uD83D\uDE20 怒り"}),(0,r.jsx)("option",{value:"excited",children:"\uD83C\uDF89 興奮"}),(0,r.jsx)("option",{value:"calm",children:"\uD83D\uDE0C 穏やか"}),(0,r.jsx)("option",{value:"anxious",children:"\uD83D\uDE30 不安"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"AI感情分析"}),(0,r.jsxs)("select",{value:N,onChange:e=>D(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,r.jsx)("option",{value:"",children:"すべて"}),(0,r.jsx)("option",{value:"positive",children:"\uD83D\uDE04 ポジティブ (4-5)"}),(0,r.jsx)("option",{value:"neutral",children:"\uD83D\uDE10 ニュートラル (2.5-4)"}),(0,r.jsx)("option",{value:"negative",children:"\uD83D\uDE14 ネガティブ (1-2.5)"})]})]})]}),(0,r.jsxs)("div",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400",children:[a.length,"件の日記が見つかりました"]})]}),a.length>0&&L&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl p-8 transition-opacity duration-300 ".concat(S?"opacity-50":"opacity-100"),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[s.createElement(L.isHighlight?d:L.emotionScore&&L.emotionScore>=4?i.A:L.tags.includes("成長")?n.A:o,{className:"w-6 h-6 ".concat(L.isHighlight?"text-yellow-500":"text-purple-500")}),(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(0,y.GP)(L.date,"yyyy年MM月dd日",{locale:p.ja})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsx)(h.A,{className:"w-4 h-4"}),(0,y.GP)(L.date,"HH:mm",{locale:p.ja}),L.mood&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"mx-2",children:"•"}),(0,r.jsxs)("span",{children:["happy"===L.mood&&"\uD83D\uDE0A 嬉しい","sad"===L.mood&&"\uD83D\uDE22 悲しい","angry"===L.mood&&"\uD83D\uDE20 怒り","excited"===L.mood&&"\uD83C\uDF89 興奮","calm"===L.mood&&"\uD83D\uDE0C 穏やか","anxious"===L.mood&&"\uD83D\uDE30 不安"]})]})]})]}),L.isHighlight&&(0,r.jsx)("div",{className:"px-3 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 rounded-full text-sm font-medium",children:"ハイライト"})]}),(0,r.jsx)("div",{className:"prose dark:prose-invert max-w-none mb-6",children:(0,r.jsx)("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed",children:L.content})}),L.tags.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:L.tags.map((e,t)=>(0,r.jsxs)("span",{className:"px-3 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full text-sm",children:["#",e]},t))}),(0,r.jsxs)("div",{className:"flex items-center justify-between border-t pt-6",children:[(0,r.jsxs)(u.$,{variant:"outline",onClick:()=>z("prev"),disabled:0===A,className:"gap-2",children:[(0,r.jsx)(x.A,{className:"w-4 h-4"}),"前の日記"]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[A+1," / ",a.length]}),(0,r.jsx)("div",{className:"flex gap-1 justify-center mt-2",children:[...Array(Math.min(5,a.length))].map((e,t)=>{let s=Math.max(0,Math.min(A-2+t,a.length-1));return(0,r.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors ".concat(s===A?"bg-purple-500":"bg-gray-300 dark:bg-gray-600")},t)})})]}),(0,r.jsxs)(u.$,{variant:"outline",onClick:()=>z("next"),disabled:A===a.length-1,className:"gap-2",children:["次の日記",(0,r.jsx)(g.A,{className:"w-4 h-4"})]})]})]}),(0,r.jsx)("div",{className:"mt-8",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("div",{className:"w-full border-t-2 border-gray-300 dark:border-gray-600"})}),(0,r.jsx)("div",{className:"relative flex justify-between",children:a.slice(0,5).map((e,t)=>(0,r.jsx)("button",{onClick:()=>M(t),className:"w-4 h-4 rounded-full border-2 transition-all ".concat(t===A?"bg-purple-500 border-purple-500 scale-125":e.isHighlight?"bg-yellow-400 border-yellow-400":"bg-white dark:bg-gray-700 border-gray-400"),title:(0,y.GP)(e.date,"MM/dd",{locale:p.ja})},e.id))})]})})]}),0===a.length&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-12 text-center",children:[(0,r.jsx)(m.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"日記が見つかりません"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"フィルターを変更するか、新しい日記を書いてみましょう"})]})]})})}},90368:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])}},e=>{e.O(0,[407,112,441,255,977],()=>e(e.s=19404)),_N_E=e.O()}]);