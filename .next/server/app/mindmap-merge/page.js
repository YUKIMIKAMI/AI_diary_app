(()=>{var a={};a.id=682,a.ids=[682],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},1730:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(81170),D=c.n(C),E=c(62506),F=c(91203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H={children:["",{children:["mindmap-merge",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,2619)),"C:\\Users\\mikam\\Downloads\\AI_diary_app\\src\\app\\mindmap-merge\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(c.bind(c,51472)),"C:\\Users\\mikam\\Downloads\\AI_diary_app\\src\\app\\layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,81170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"]}]}.children,I=["C:\\Users\\mikam\\Downloads\\AI_diary_app\\src\\app\\mindmap-merge\\page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/mindmap-merge/page",pathname:"/mindmap-merge",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/mindmap-merge/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw aF||b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},2619:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\mikam\\\\Downloads\\\\AI_diary_app\\\\src\\\\app\\\\mindmap-merge\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\mikam\\Downloads\\AI_diary_app\\src\\app\\mindmap-merge\\page.tsx","default")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4600:(a,b,c)=>{Promise.resolve().then(c.bind(c,2619))},10183:(a,b,c)=>{Promise.resolve().then(c.bind(c,15073))},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11489:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},13179:(a,b,c)=>{"use strict";c.d(b,{Header:()=>w});var d=c(21124),e=c(38301),f=c.n(e),g=c(3991),h=c.n(g),i=c(16359),j=c(76180),k=c(88285),l=c(60073),m=c(65783),n=c(15952),o=c(84220),p=c(15303),q=c(44688),r=c(49269),s=c(70175),t=c(60988),u=c(10578),v=c(6130);function w(){let[a,b]=f().useState(!1),[c,e]=f().useState(!1),g=[{href:"/diary/new",label:"日記を書く",icon:j.A},{href:"/search",label:"検索",icon:k.A},{href:"/mindmap",label:"マインドマップ",icon:l.A},{href:"/mindmap-merge",label:"統合マップ",icon:m.A},{href:"/emotions",label:"感情分析",icon:n.A},{href:"/words",label:"単語分析",icon:o.A},{href:"/timeline",label:"タイムライン",icon:p.A},{href:"/consultation",label:"AI相談",icon:q.A},{href:"/export",label:"エクスポート",icon:r.A}];return(0,d.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-white dark:bg-gray-900 dark:border-gray-800",children:(0,d.jsxs)("div",{className:"container mx-auto px-4",children:[(0,d.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,d.jsxs)(h(),{href:"/",className:"flex items-center space-x-2",children:[(0,d.jsx)(l.A,{className:"h-8 w-8 text-primary-500"}),(0,d.jsx)("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"AI Diary"})]}),(0,d.jsx)("nav",{className:"hidden lg:flex items-center space-x-4 xl:space-x-6",children:g.map(a=>(0,d.jsxs)(h(),{href:a.href,className:"flex items-center space-x-1 text-gray-600 hover:text-primary-500 dark:text-gray-400 dark:hover:text-primary-400 transition-colors text-sm whitespace-nowrap",children:[(0,d.jsx)(a.icon,{className:"h-4 w-4 flex-shrink-0"}),(0,d.jsx)("span",{children:a.label})]},a.href))}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>b(!a),className:"hidden lg:flex",children:a?(0,d.jsx)(s.A,{className:"h-5 w-5"}):(0,d.jsx)(t.A,{className:"h-5 w-5"})}),(0,d.jsx)(i.$,{variant:"ghost",size:"icon",className:"hidden lg:flex",children:(0,d.jsx)(u.A,{className:"h-5 w-5"})}),(0,d.jsx)(i.$,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>e(!c),children:(0,d.jsx)(v.A,{className:"h-5 w-5"})})]})]}),c&&(0,d.jsxs)("nav",{className:"lg:hidden py-4 border-t dark:border-gray-800",children:[g.map(a=>(0,d.jsxs)(h(),{href:a.href,className:"flex items-center space-x-2 px-4 py-2 text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800 rounded-lg transition-colors",onClick:()=>e(!1),children:[(0,d.jsx)(a.icon,{className:"h-4 w-4"}),(0,d.jsx)("span",{children:a.label})]},a.href)),(0,d.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 mt-2 border-t dark:border-gray-800",children:[(0,d.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"テーマ"}),(0,d.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>b(!a),children:a?"ライト":"ダーク"})]})]})]})})}},15073:(a,b,c)=>{"use strict";c.d(b,{Header:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call Header() from the server but Header is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\mikam\\Downloads\\AI_diary_app\\src\\components\\layout\\header.tsx","Header")},16359:(a,b,c)=>{"use strict";c.d(b,{$:()=>k});var d=c(21124),e=c(38301),f=c(70469),g=c(26691),h=c(43249),i=c(58829);let j=(0,g.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary-500 text-white hover:bg-primary-600",destructive:"bg-red-500 text-white hover:bg-red-600",outline:"border border-gray-300 bg-transparent hover:bg-gray-100 dark:border-gray-600 dark:hover:bg-gray-800",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-100 dark:hover:bg-gray-700",ghost:"hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-gray-800 dark:hover:text-gray-100",link:"text-primary-500 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),k=e.forwardRef(({className:a,variant:b,size:c,asChild:e=!1,...g},k)=>{let l=e?f.DX:"button";return(0,d.jsx)(l,{className:function(...a){return(0,i.QP)((0,h.$)(a))}(j({variant:b,size:c,className:a})),ref:k,...g})});k.displayName="Button"},17163:()=>{},18004:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},23673:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},24095:(a,b,c)=>{Promise.resolve().then(c.bind(c,13179))},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},28354:a=>{"use strict";a.exports=require("util")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32198:(a,b,c)=>{"use strict";c.d(b,{_P:()=>f,my:()=>d,w4:()=>e});let d=6048e5,e=864e5,f=Symbol.for("constructDateFrom")},33873:a=>{"use strict";a.exports=require("path")},36950:(a,b,c)=>{"use strict";c.d(b,{w:()=>e});var d=c(32198);function e(a,b){return"function"==typeof a?a(b):a&&"object"==typeof a&&d._P in a?a[d._P](b):a instanceof Date?new a.constructor(b):new Date(b)}},39448:(a,b,c)=>{Promise.resolve().then(c.bind(c,45113))},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},45113:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>ds});var d,e,f,g,h,i,j,k=c(21124),l=c(38301);function m(a){if("string"==typeof a||"number"==typeof a)return""+a;let b="";if(Array.isArray(a))for(let c=0,d;c<a.length;c++)""!==(d=m(a[c]))&&(b+=(b&&" ")+d);else for(let c in a)a[c]&&(b+=(b&&" ")+c);return b}var n=c(93350);let o=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),c.clear()}},g=b=a(d,e,f);return f},{useDebugValue:p}=l,{useSyncExternalStoreWithSelector:q}=n,r=a=>a;function s(a,b=r,c){let d=q(a.subscribe,a.getState,a.getServerState||a.getInitialState,b,c);return p(d),d}let t=(a,b)=>{let c=(a=>a?o(a):o)(a),d=(a,d=b)=>s(c,a,d);return Object.assign(d,c),d};function u(a,b){if(Object.is(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;if(a instanceof Map&&b instanceof Map){if(a.size!==b.size)return!1;for(let[c,d]of a)if(!Object.is(d,b.get(c)))return!1;return!0}if(a instanceof Set&&b instanceof Set){if(a.size!==b.size)return!1;for(let c of a)if(!b.has(c))return!1;return!0}let c=Object.keys(a);if(c.length!==Object.keys(b).length)return!1;for(let d of c)if(!Object.prototype.hasOwnProperty.call(b,d)||!Object.is(a[d],b[d]))return!1;return!0}var v=c(2038),w=c(12518),x=c(80016),y=c(1034),z=c(15857),A=c(49039);let B=a=>()=>a;function C(a,{sourceEvent:b,subject:c,target:d,identifier:e,active:f,x:g,y:h,dx:i,dy:j,dispatch:k}){Object.defineProperties(this,{type:{value:a,enumerable:!0,configurable:!0},sourceEvent:{value:b,enumerable:!0,configurable:!0},subject:{value:c,enumerable:!0,configurable:!0},target:{value:d,enumerable:!0,configurable:!0},identifier:{value:e,enumerable:!0,configurable:!0},active:{value:f,enumerable:!0,configurable:!0},x:{value:g,enumerable:!0,configurable:!0},y:{value:h,enumerable:!0,configurable:!0},dx:{value:i,enumerable:!0,configurable:!0},dy:{value:j,enumerable:!0,configurable:!0},_:{value:k}})}function D(a){return!a.ctrlKey&&!a.button}function E(){return this.parentNode}function F(a,b){return null==b?{x:a.x,y:a.y}:b}function G(){return navigator.maxTouchPoints||"ontouchstart"in this}C.prototype.on=function(){var a=this._.on.apply(this._,arguments);return a===this._?this:a},c(23312);let H=(0,l.createContext)(null),I=H.Provider,J={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error003:a=>`Node type "${a}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error009:a=>`Marker type "${a}" doesn't exist.`,error008:(a,b)=>`Couldn't create edge for ${!a?"source":"target"} handle id: "${!a?b.sourceHandle:b.targetHandle}", edge id: ${b.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:a=>`Edge type "${a}" not found. Using fallback type "default".`,error012:a=>`Node with id "${a}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},K=J.error001();function L(a,b){let c=(0,l.useContext)(H);if(null===c)throw Error(K);return s(c,a,b)}let M=()=>{let a=(0,l.useContext)(H);if(null===a)throw Error(K);return(0,l.useMemo)(()=>({getState:a.getState,setState:a.setState,subscribe:a.subscribe,destroy:a.destroy}),[a])},N=a=>a.userSelectionActive?"none":"all";function O({position:a,children:b,className:c,style:d,...e}){let f=L(N),g=`${a}`.split("-");return l.createElement("div",{className:m(["react-flow__panel",c,...g]),style:{...d,pointerEvents:f},...e},b)}function P({proOptions:a,position:b="bottom-right"}){return a?.hideAttribution?null:l.createElement(O,{position:b,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},l.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var Q=(0,l.memo)(({x:a,y:b,label:c,labelStyle:d={},labelShowBg:e=!0,labelBgStyle:f={},labelBgPadding:g=[2,4],labelBgBorderRadius:h=2,children:i,className:j,...k})=>{let n=(0,l.useRef)(null),[o,p]=(0,l.useState)({x:0,y:0,width:0,height:0}),q=m(["react-flow__edge-textwrapper",j]);return((0,l.useEffect)(()=>{if(n.current){let a=n.current.getBBox();p({x:a.x,y:a.y,width:a.width,height:a.height})}},[c]),void 0!==c&&c)?l.createElement("g",{transform:`translate(${a-o.width/2} ${b-o.height/2})`,className:q,visibility:o.width?"visible":"hidden",...k},e&&l.createElement("rect",{width:o.width+2*g[0],x:-g[0],y:-g[1],height:o.height+2*g[1],className:"react-flow__edge-textbg",style:f,rx:h,ry:h}),l.createElement("text",{className:"react-flow__edge-text",y:o.height/2,dy:"0.3em",ref:n,style:d},c),i):null});let R=a=>({width:a.offsetWidth,height:a.offsetHeight}),S=(a,b=0,c=1)=>Math.min(Math.max(a,b),c),T=(a={x:0,y:0},b)=>({x:S(a.x,b[0][0],b[1][0]),y:S(a.y,b[0][1],b[1][1])}),U=(a,b,c)=>a<b?S(Math.abs(a-b),1,50)/50:a>c?-S(Math.abs(a-c),1,50)/50:0,V=(a,b)=>[20*U(a.x,35,b.width-35),20*U(a.y,35,b.height-35)],W=a=>a.getRootNode?.()||window?.document,X=(a,b)=>({x:Math.min(a.x,b.x),y:Math.min(a.y,b.y),x2:Math.max(a.x2,b.x2),y2:Math.max(a.y2,b.y2)}),Y=({x:a,y:b,width:c,height:d})=>({x:a,y:b,x2:a+c,y2:b+d}),Z=({x:a,y:b,x2:c,y2:d})=>({x:a,y:b,width:c-a,height:d-b}),$=a=>({...a.positionAbsolute||{x:0,y:0},width:a.width||0,height:a.height||0}),_=(a,b)=>Math.ceil(Math.max(0,Math.min(a.x+a.width,b.x+b.width)-Math.max(a.x,b.x))*Math.max(0,Math.min(a.y+a.height,b.y+b.height)-Math.max(a.y,b.y))),aa=a=>!isNaN(a)&&isFinite(a),ab=Symbol.for("internals"),ac=["Enter"," ","Escape"],ad=(a,b)=>{};function ae(a){let b="nativeEvent"in a?a.nativeEvent:a,c=b.composedPath?.()?.[0]||a.target;return["INPUT","SELECT","TEXTAREA"].includes(c?.nodeName)||c?.hasAttribute("contenteditable")||!!c?.closest(".nokey")}let af=(a,b)=>{let c="clientX"in a,d=c?a.clientX:a.touches?.[0].clientX,e=c?a.clientY:a.touches?.[0].clientY;return{x:d-(b?.left??0),y:e-(b?.top??0)}},ag=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0,ah=({id:a,path:b,labelX:c,labelY:d,label:e,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:i,labelBgBorderRadius:j,style:k,markerEnd:m,markerStart:n,interactionWidth:o=20})=>l.createElement(l.Fragment,null,l.createElement("path",{id:a,style:k,d:b,fill:"none",className:"react-flow__edge-path",markerEnd:m,markerStart:n}),o&&l.createElement("path",{d:b,fill:"none",strokeOpacity:0,strokeWidth:o,className:"react-flow__edge-interaction"}),e&&aa(c)&&aa(d)?l.createElement(Q,{x:c,y:d,label:e,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:i,labelBgBorderRadius:j}):null);function ai(a,b,c){return void 0===c?c:d=>{let e=b().edges.find(b=>b.id===a);e&&c(d,{...e})}}function aj({sourceX:a,sourceY:b,targetX:c,targetY:d}){let e=Math.abs(c-a)/2,f=Math.abs(d-b)/2;return[c<a?c+e:c-e,d<b?d+f:d-f,e,f]}function ak({sourceX:a,sourceY:b,targetX:c,targetY:d,sourceControlX:e,sourceControlY:f,targetControlX:g,targetControlY:h}){let i=.125*a+.375*e+.375*g+.125*c,j=.125*b+.375*f+.375*h+.125*d,k=Math.abs(i-a),l=Math.abs(j-b);return[i,j,k,l]}function al({pos:a,x1:b,y1:c,x2:d,y2:e}){return a===i.Left||a===i.Right?[.5*(b+d),c]:[b,.5*(c+e)]}function am({sourceX:a,sourceY:b,sourcePosition:c=i.Bottom,targetX:d,targetY:e,targetPosition:f=i.Top}){let[g,h]=al({pos:c,x1:a,y1:b,x2:d,y2:e}),[j,k]=al({pos:f,x1:d,y1:e,x2:a,y2:b}),[l,m,n,o]=ak({sourceX:a,sourceY:b,targetX:d,targetY:e,sourceControlX:g,sourceControlY:h,targetControlX:j,targetControlY:k});return[`M${a},${b} C${g},${h} ${j},${k} ${d},${e}`,l,m,n,o]}ah.displayName="BaseEdge",function(a){a.Strict="strict",a.Loose="loose"}(d||(d={})),function(a){a.Free="free",a.Vertical="vertical",a.Horizontal="horizontal"}(e||(e={})),function(a){a.Partial="partial",a.Full="full"}(f||(f={})),function(a){a.Bezier="default",a.Straight="straight",a.Step="step",a.SmoothStep="smoothstep",a.SimpleBezier="simplebezier"}(g||(g={})),function(a){a.Arrow="arrow",a.ArrowClosed="arrowclosed"}(h||(h={})),function(a){a.Left="left",a.Top="top",a.Right="right",a.Bottom="bottom"}(i||(i={}));let an=(0,l.memo)(({sourceX:a,sourceY:b,targetX:c,targetY:d,sourcePosition:e=i.Bottom,targetPosition:f=i.Top,label:g,labelStyle:h,labelShowBg:j,labelBgStyle:k,labelBgPadding:m,labelBgBorderRadius:n,style:o,markerEnd:p,markerStart:q,interactionWidth:r})=>{let[s,t,u]=am({sourceX:a,sourceY:b,sourcePosition:e,targetX:c,targetY:d,targetPosition:f});return l.createElement(ah,{path:s,labelX:t,labelY:u,label:g,labelStyle:h,labelShowBg:j,labelBgStyle:k,labelBgPadding:m,labelBgBorderRadius:n,style:o,markerEnd:p,markerStart:q,interactionWidth:r})});an.displayName="SimpleBezierEdge";let ao={[i.Left]:{x:-1,y:0},[i.Right]:{x:1,y:0},[i.Top]:{x:0,y:-1},[i.Bottom]:{x:0,y:1}},ap=({source:a,sourcePosition:b=i.Bottom,target:c})=>b===i.Left||b===i.Right?a.x<c.x?{x:1,y:0}:{x:-1,y:0}:a.y<c.y?{x:0,y:1}:{x:0,y:-1},aq=(a,b)=>Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2));function ar({sourceX:a,sourceY:b,sourcePosition:c=i.Bottom,targetX:d,targetY:e,targetPosition:f=i.Top,borderRadius:g=5,centerX:h,centerY:j,offset:k=20}){let[l,m,n,o,p]=function({source:a,sourcePosition:b=i.Bottom,target:c,targetPosition:d=i.Top,center:e,offset:f}){let g,h,j=ao[b],k=ao[d],l={x:a.x+j.x*f,y:a.y+j.y*f},m={x:c.x+k.x*f,y:c.y+k.y*f},n=ap({source:l,sourcePosition:b,target:m}),o=0!==n.x?"x":"y",p=n[o],q=[],r={x:0,y:0},s={x:0,y:0},[t,u,v,w]=aj({sourceX:a.x,sourceY:a.y,targetX:c.x,targetY:c.y});if(j[o]*k[o]==-1){g=e.x??t,h=e.y??u;let a=[{x:g,y:l.y},{x:g,y:m.y}],b=[{x:l.x,y:h},{x:m.x,y:h}];q=j[o]===p?"x"===o?a:b:"x"===o?b:a}else{let e=[{x:l.x,y:m.y}],i=[{x:m.x,y:l.y}];if(q="x"===o?j.x===p?i:e:j.y===p?e:i,b===d){let b=Math.abs(a[o]-c[o]);if(b<=f){let d=Math.min(f-1,f-b);j[o]===p?r[o]=(l[o]>a[o]?-1:1)*d:s[o]=(m[o]>c[o]?-1:1)*d}}if(b!==d){let a="x"===o?"y":"x",b=j[o]===k[a],c=l[a]>m[a],d=l[a]<m[a];(1===j[o]&&(!b&&c||b&&d)||1!==j[o]&&(!b&&d||b&&c))&&(q="x"===o?e:i)}let n={x:l.x+r.x,y:l.y+r.y},t={x:m.x+s.x,y:m.y+s.y};Math.max(Math.abs(n.x-q[0].x),Math.abs(t.x-q[0].x))>=Math.max(Math.abs(n.y-q[0].y),Math.abs(t.y-q[0].y))?(g=(n.x+t.x)/2,h=q[0].y):(g=q[0].x,h=(n.y+t.y)/2)}return[[a,{x:l.x+r.x,y:l.y+r.y},...q,{x:m.x+s.x,y:m.y+s.y},c],g,h,v,w]}({source:{x:a,y:b},sourcePosition:c,target:{x:d,y:e},targetPosition:f,center:{x:h,y:j},offset:k});return[l.reduce((a,b,c)=>a+(c>0&&c<l.length-1?function(a,b,c,d){let e=Math.min(aq(a,b)/2,aq(b,c)/2,d),{x:f,y:g}=b;if(a.x===f&&f===c.x||a.y===g&&g===c.y)return`L${f} ${g}`;if(a.y===g){let b=a.x<c.x?-1:1,d=a.y<c.y?1:-1;return`L ${f+e*b},${g}Q ${f},${g} ${f},${g+e*d}`}let h=a.x<c.x?1:-1,i=a.y<c.y?-1:1;return`L ${f},${g+e*i}Q ${f},${g} ${f+e*h},${g}`}(l[c-1],b,l[c+1],g):`${0===c?"M":"L"}${b.x} ${b.y}`),""),m,n,o,p]}let as=(0,l.memo)(({sourceX:a,sourceY:b,targetX:c,targetY:d,label:e,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:j,labelBgBorderRadius:k,style:m,sourcePosition:n=i.Bottom,targetPosition:o=i.Top,markerEnd:p,markerStart:q,pathOptions:r,interactionWidth:s})=>{let[t,u,v]=ar({sourceX:a,sourceY:b,sourcePosition:n,targetX:c,targetY:d,targetPosition:o,borderRadius:r?.borderRadius,offset:r?.offset});return l.createElement(ah,{path:t,labelX:u,labelY:v,label:e,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:j,labelBgBorderRadius:k,style:m,markerEnd:p,markerStart:q,interactionWidth:s})});as.displayName="SmoothStepEdge";let at=(0,l.memo)(a=>l.createElement(as,{...a,pathOptions:(0,l.useMemo)(()=>({borderRadius:0,offset:a.pathOptions?.offset}),[a.pathOptions?.offset])}));at.displayName="StepEdge";let au=(0,l.memo)(({sourceX:a,sourceY:b,targetX:c,targetY:d,label:e,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:i,labelBgBorderRadius:j,style:k,markerEnd:m,markerStart:n,interactionWidth:o})=>{let[p,q,r]=function({sourceX:a,sourceY:b,targetX:c,targetY:d}){let[e,f,g,h]=aj({sourceX:a,sourceY:b,targetX:c,targetY:d});return[`M ${a},${b}L ${c},${d}`,e,f,g,h]}({sourceX:a,sourceY:b,targetX:c,targetY:d});return l.createElement(ah,{path:p,labelX:q,labelY:r,label:e,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:i,labelBgBorderRadius:j,style:k,markerEnd:m,markerStart:n,interactionWidth:o})});function av(a,b){return a>=0?.5*a:25*b*Math.sqrt(-a)}function aw({pos:a,x1:b,y1:c,x2:d,y2:e,c:f}){switch(a){case i.Left:return[b-av(b-d,f),c];case i.Right:return[b+av(d-b,f),c];case i.Top:return[b,c-av(c-e,f)];case i.Bottom:return[b,c+av(e-c,f)]}}function ax({sourceX:a,sourceY:b,sourcePosition:c=i.Bottom,targetX:d,targetY:e,targetPosition:f=i.Top,curvature:g=.25}){let[h,j]=aw({pos:c,x1:a,y1:b,x2:d,y2:e,c:g}),[k,l]=aw({pos:f,x1:d,y1:e,x2:a,y2:b,c:g}),[m,n,o,p]=ak({sourceX:a,sourceY:b,targetX:d,targetY:e,sourceControlX:h,sourceControlY:j,targetControlX:k,targetControlY:l});return[`M${a},${b} C${h},${j} ${k},${l} ${d},${e}`,m,n,o,p]}au.displayName="StraightEdge";let ay=(0,l.memo)(({sourceX:a,sourceY:b,targetX:c,targetY:d,sourcePosition:e=i.Bottom,targetPosition:f=i.Top,label:g,labelStyle:h,labelShowBg:j,labelBgStyle:k,labelBgPadding:m,labelBgBorderRadius:n,style:o,markerEnd:p,markerStart:q,pathOptions:r,interactionWidth:s})=>{let[t,u,v]=ax({sourceX:a,sourceY:b,sourcePosition:e,targetX:c,targetY:d,targetPosition:f,curvature:r?.curvature});return l.createElement(ah,{path:t,labelX:u,labelY:v,label:g,labelStyle:h,labelShowBg:j,labelBgStyle:k,labelBgPadding:m,labelBgBorderRadius:n,style:o,markerEnd:p,markerStart:q,interactionWidth:s})});ay.displayName="BezierEdge";let az=(0,l.createContext)(null),aA=az.Provider;az.Consumer;let aB=(a,b)=>{if(void 0===a)return"";if("string"==typeof a)return a;let c=b?`${b}__`:"";return`${c}${Object.keys(a).sort().map(b=>`${b}=${a[b]}`).join("&")}`},aC=({x:a,y:b},[c,d,e],f,[g,h])=>{let i={x:(a-c)/e,y:(b-d)/e};return f?{x:g*Math.round(i.x/g),y:h*Math.round(i.y/h)}:i},aD=({x:a,y:b},[c,d,e])=>({x:a*e+c,y:b*e+d}),aE=(a,b=[0,0])=>{if(!a)return{x:0,y:0,positionAbsolute:{x:0,y:0}};let c=(a.width??0)*b[0],d=(a.height??0)*b[1],e={x:a.position.x-c,y:a.position.y-d};return{...e,positionAbsolute:a.positionAbsolute?{x:a.positionAbsolute.x-c,y:a.positionAbsolute.y-d}:e}},aF=(a,b=[0,0])=>0===a.length?{x:0,y:0,width:0,height:0}:Z(a.reduce((a,c)=>{let{x:d,y:e}=aE(c,b).positionAbsolute;return X(a,Y({x:d,y:e,width:c.width||0,height:c.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0})),aG=(a,b,[c,d,e]=[0,0,1],f=!1,g=!1,h=[0,0])=>{let i={x:(b.x-c)/e,y:(b.y-d)/e,width:b.width/e,height:b.height/e},j=[];return a.forEach(a=>{let{width:b,height:c,selectable:d=!0,hidden:e=!1}=a;if(g&&!d||e)return!1;let{positionAbsolute:k}=aE(a,h),l=_(i,{x:k.x,y:k.y,width:b||0,height:c||0}),m=void 0===b||void 0===c||null===b||null===c,n=(b||0)*(c||0);(m||f&&l>0||l>=n||a.dragging)&&j.push(a)}),j},aH=(a,b)=>{let c=a.map(a=>a.id);return b.filter(a=>c.includes(a.source)||c.includes(a.target))},aI=(a,b,c,d,e,f=.1)=>{let g=S(Math.min(b/(a.width*(1+f)),c/(a.height*(1+f))),d,e),h=a.x+a.width/2;return{x:b/2-h*g,y:c/2-(a.y+a.height/2)*g,zoom:g}},aJ=(a,b=0)=>a.transition().duration(b);function aK(a,b,c,d){return(b[c]||[]).reduce((b,e)=>(`${a.id}-${e.id}-${c}`!==d&&b.push({id:e.id||null,type:c,nodeId:a.id,x:(a.positionAbsolute?.x??0)+e.x+e.width/2,y:(a.positionAbsolute?.y??0)+e.y+e.height/2}),b),[])}let aL={source:null,target:null,sourceHandle:null,targetHandle:null},aM=()=>({handleDomNode:null,isValid:!1,connection:aL,endHandle:null});function aN(a,b,c,e,f,g,h){let i="target"===f,j=h.querySelector(`.react-flow__handle[data-id="${a?.nodeId}-${a?.id}-${a?.type}"]`),k={...aM(),handleDomNode:j};if(j){let a=aO(void 0,j),f=j.getAttribute("data-nodeid"),h=j.getAttribute("data-handleid"),l=j.classList.contains("connectable"),m=j.classList.contains("connectableend"),n={source:i?f:c,sourceHandle:i?h:e,target:i?c:f,targetHandle:i?e:h};k.connection=n,l&&m&&(b===d.Strict?i&&"source"===a||!i&&"target"===a:f!==c||h!==e)&&(k.endHandle={nodeId:f,handleId:h,type:a},k.isValid=g(n))}return k}function aO(a,b){return a?a:b?.classList.contains("target")?"target":b?.classList.contains("source")?"source":null}function aP(a){a?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function aQ({event:a,handleId:b,nodeId:c,onConnect:d,isTarget:e,getState:f,setState:g,isValidConnection:h,edgeUpdaterType:i,onReconnectEnd:j}){let k,l,m=W(a.target),{connectionMode:n,domNode:o,autoPanOnConnect:p,connectionRadius:q,onConnectStart:r,panBy:s,getNodes:t,cancelConnection:u}=f(),v=0,{x:w,y:x}=af(a),y=aO(i,m?.elementFromPoint(w,x)),z=o?.getBoundingClientRect();if(!z||!y)return;let A=af(a,z),B=!1,C=null,D=!1,E=null,F=function({nodes:a,nodeId:b,handleId:c,handleType:d}){return a.reduce((a,e)=>{if(e[ab]){let{handleBounds:f}=e[ab],g=[],h=[];f&&(g=aK(e,f,"source",`${b}-${c}-${d}`),h=aK(e,f,"target",`${b}-${c}-${d}`)),a.push(...g,...h)}return a},[])}({nodes:t(),nodeId:c,handleId:b,handleType:y}),G=()=>{if(!p)return;let[a,b]=V(A,z);s({x:a,y:b}),v=requestAnimationFrame(G)};function H(a){var d,i;let j,{transform:o}=f();A=af(a,z);let{handle:p,validHandleResult:r}=function(a,b,c,d,e,f){let{x:g,y:h}=af(a),i=b.elementsFromPoint(g,h).find(a=>a.classList.contains("react-flow__handle"));if(i){let a=i.getAttribute("data-nodeid");if(a){let b=aO(void 0,i),d=i.getAttribute("data-handleid"),g=f({nodeId:a,id:d,type:b});if(g){let f=e.find(c=>c.nodeId===a&&c.type===b&&c.id===d);return{handle:{id:d,type:b,nodeId:a,x:f?.x||c.x,y:f?.y||c.y},validHandleResult:g}}}}let j=[],k=1/0;if(e.forEach(a=>{let b=Math.sqrt((a.x-c.x)**2+(a.y-c.y)**2);if(b<=d){let c=f(a);b<=k&&(b<k?j=[{handle:a,validHandleResult:c}]:b===k&&j.push({handle:a,validHandleResult:c}),k=b)}}),!j.length)return{handle:null,validHandleResult:aM()};if(1===j.length)return j[0];let l=j.some(({validHandleResult:a})=>a.isValid),m=j.some(({handle:a})=>"target"===a.type);return j.find(({handle:a,validHandleResult:b})=>m?"target"===a.type:!l||b.isValid)||j[0]}(a,m,aC(A,o,!1,[1,1]),q,F,a=>aN(a,n,c,b,e?"target":"source",h,m));if(k=p,B||(G(),B=!0),E=r.handleDomNode,C=r.connection,D=r.isValid,g({connectionPosition:k&&D?aD({x:k.x,y:k.y},o):A,connectionStatus:(d=!!k,j=null,(i=D)?j="valid":d&&!i&&(j="invalid"),j),connectionEndHandle:r.endHandle}),!k&&!D&&!E)return aP(l);C.source!==C.target&&E&&(aP(l),l=E,E.classList.add("connecting","react-flow__handle-connecting"),E.classList.toggle("valid",D),E.classList.toggle("react-flow__handle-valid",D))}function I(a){(k||E)&&C&&D&&d?.(C),f().onConnectEnd?.(a),i&&j?.(a),aP(l),u(),cancelAnimationFrame(v),B=!1,D=!1,C=null,E=null,m.removeEventListener("mousemove",H),m.removeEventListener("mouseup",I),m.removeEventListener("touchmove",H),m.removeEventListener("touchend",I)}g({connectionPosition:A,connectionStatus:null,connectionNodeId:c,connectionHandleId:b,connectionHandleType:y,connectionStartHandle:{nodeId:c,handleId:b,type:y},connectionEndHandle:null}),r?.(a,{nodeId:c,handleId:b,handleType:y}),m.addEventListener("mousemove",H),m.addEventListener("mouseup",I),m.addEventListener("touchmove",H),m.addEventListener("touchend",I)}let aR=()=>!0,aS=a=>({connectionStartHandle:a.connectionStartHandle,connectOnClick:a.connectOnClick,noPanClassName:a.noPanClassName}),aT=(0,l.forwardRef)(({type:a="source",position:b=i.Top,isValidConnection:c,isConnectable:d=!0,isConnectableStart:e=!0,isConnectableEnd:f=!0,id:g,onConnect:h,children:j,className:k,onMouseDown:n,onTouchStart:o,...p},q)=>{let r=g||null,s="target"===a,t=M(),v=(0,l.useContext)(az),{connectOnClick:w,noPanClassName:x}=L(aS,u),{connecting:y,clickConnecting:z}=L(((a,b,c)=>d=>{let{connectionStartHandle:e,connectionEndHandle:f,connectionClickStartHandle:g}=d;return{connecting:e?.nodeId===a&&e?.handleId===b&&e?.type===c||f?.nodeId===a&&f?.handleId===b&&f?.type===c,clickConnecting:g?.nodeId===a&&g?.handleId===b&&g?.type===c}})(v,r,a),u);v||t.getState().onError?.("010",J.error010());let A=a=>{let{defaultEdgeOptions:b,onConnect:c,hasDefaultEdges:d}=t.getState(),e={...b,...a};if(d){let{edges:a,setEdges:b}=t.getState();b(((a,b)=>{let c;return a.source&&a.target?((a,b)=>b.some(b=>b.source===a.source&&b.target===a.target&&(b.sourceHandle===a.sourceHandle||!b.sourceHandle&&!a.sourceHandle)&&(b.targetHandle===a.targetHandle||!b.targetHandle&&!a.targetHandle)))(c=(a=>"id"in a&&"source"in a&&"target"in a)(a)?{...a}:{...a,id:(({source:a,sourceHandle:b,target:c,targetHandle:d})=>`reactflow__edge-${a}${b||""}-${c}${d||""}`)(a)},b)?b:b.concat(c):(ad("006",J.error006()),b)})(e,a))}c?.(e),h?.(e)},B=a=>{if(!v)return;let b="clientX"in a;e&&(b&&0===a.button||!b)&&aQ({event:a,handleId:r,nodeId:v,onConnect:A,isTarget:s,getState:t.getState,setState:t.setState,isValidConnection:c||t.getState().isValidConnection||aR}),b?n?.(a):o?.(a)};return l.createElement("div",{"data-handleid":r,"data-nodeid":v,"data-handlepos":b,"data-id":`${v}-${r}-${a}`,className:m(["react-flow__handle",`react-flow__handle-${b}`,"nodrag",x,k,{source:!s,target:s,connectable:d,connectablestart:e,connectableend:f,connecting:z,connectionindicator:d&&(e&&!y||f&&y)}]),onMouseDown:B,onTouchStart:B,onClick:w?b=>{let{onClickConnectStart:d,onClickConnectEnd:f,connectionClickStartHandle:g,connectionMode:h,isValidConnection:i}=t.getState();if(!v||!g&&!e)return;if(!g){d?.(b,{nodeId:v,handleId:r,handleType:a}),t.setState({connectionClickStartHandle:{nodeId:v,type:a,handleId:r}});return}let j=W(b.target),k=c||i||aR,{connection:l,isValid:m}=aN({nodeId:v,id:r,type:a},h,g.nodeId,g.handleId||null,g.type,k,j);m&&A(l),f?.(b),t.setState({connectionClickStartHandle:null})}:void 0,ref:q,...p},j)});aT.displayName="Handle";var aU=(0,l.memo)(aT);let aV=({data:a,isConnectable:b,targetPosition:c=i.Top,sourcePosition:d=i.Bottom})=>l.createElement(l.Fragment,null,l.createElement(aU,{type:"target",position:c,isConnectable:b}),a?.label,l.createElement(aU,{type:"source",position:d,isConnectable:b}));aV.displayName="DefaultNode";var aW=(0,l.memo)(aV);let aX=({data:a,isConnectable:b,sourcePosition:c=i.Bottom})=>l.createElement(l.Fragment,null,a?.label,l.createElement(aU,{type:"source",position:c,isConnectable:b}));aX.displayName="InputNode";var aY=(0,l.memo)(aX);let aZ=({data:a,isConnectable:b,targetPosition:c=i.Top})=>l.createElement(l.Fragment,null,l.createElement(aU,{type:"target",position:c,isConnectable:b}),a?.label);aZ.displayName="OutputNode";var a$=(0,l.memo)(aZ);let a_=()=>null;a_.displayName="GroupNode";let a0=a=>({selectedNodes:a.getNodes().filter(a=>a.selected),selectedEdges:a.edges.filter(a=>a.selected).map(a=>({...a}))}),a1=a=>a.id;function a2(a,b){return u(a.selectedNodes.map(a1),b.selectedNodes.map(a1))&&u(a.selectedEdges.map(a1),b.selectedEdges.map(a1))}let a3=(0,l.memo)(({onSelectionChange:a})=>{let b=M(),{selectedNodes:c,selectedEdges:d}=L(a0,a2);return(0,l.useEffect)(()=>{let e={nodes:c,edges:d};a?.(e),b.getState().onSelectionChange.forEach(a=>a(e))},[c,d,a]),null});a3.displayName="SelectionListener";let a4=a=>!!a.onSelectionChange;function a5({onSelectionChange:a}){let b=L(a4);return a||b?l.createElement(a3,{onSelectionChange:a}):null}let a6=a=>({setNodes:a.setNodes,setEdges:a.setEdges,setDefaultNodesAndEdges:a.setDefaultNodesAndEdges,setMinZoom:a.setMinZoom,setMaxZoom:a.setMaxZoom,setTranslateExtent:a.setTranslateExtent,setNodeExtent:a.setNodeExtent,reset:a.reset});function a7(a,b){(0,l.useEffect)(()=>{void 0!==a&&b(a)},[a])}function a8(a,b,c){(0,l.useEffect)(()=>{void 0!==b&&c({[a]:b})},[b])}let a9=({nodes:a,edges:b,defaultNodes:c,defaultEdges:d,onConnect:e,onConnectStart:f,onConnectEnd:g,onClickConnectStart:h,onClickConnectEnd:i,nodesDraggable:j,nodesConnectable:k,nodesFocusable:m,edgesFocusable:n,edgesUpdatable:o,elevateNodesOnSelect:p,minZoom:q,maxZoom:r,nodeExtent:s,onNodesChange:t,onEdgesChange:v,elementsSelectable:w,connectionMode:x,snapGrid:y,snapToGrid:z,translateExtent:A,connectOnClick:B,defaultEdgeOptions:C,fitView:D,fitViewOptions:E,onNodesDelete:F,onEdgesDelete:G,onNodeDrag:H,onNodeDragStart:I,onNodeDragStop:J,onSelectionDrag:K,onSelectionDragStart:N,onSelectionDragStop:O,noPanClassName:P,nodeOrigin:Q,rfId:R,autoPanOnConnect:S,autoPanOnNodeDrag:T,onError:U,connectionRadius:V,isValidConnection:W,nodeDragThreshold:X})=>{let{setNodes:Y,setEdges:Z,setDefaultNodesAndEdges:$,setMinZoom:_,setMaxZoom:aa,setTranslateExtent:ab,setNodeExtent:ac,reset:ad}=L(a6,u),ae=M();return(0,l.useEffect)(()=>($(c,d?.map(a=>({...a,...C}))),()=>{ad()}),[]),a8("defaultEdgeOptions",C,ae.setState),a8("connectionMode",x,ae.setState),a8("onConnect",e,ae.setState),a8("onConnectStart",f,ae.setState),a8("onConnectEnd",g,ae.setState),a8("onClickConnectStart",h,ae.setState),a8("onClickConnectEnd",i,ae.setState),a8("nodesDraggable",j,ae.setState),a8("nodesConnectable",k,ae.setState),a8("nodesFocusable",m,ae.setState),a8("edgesFocusable",n,ae.setState),a8("edgesUpdatable",o,ae.setState),a8("elementsSelectable",w,ae.setState),a8("elevateNodesOnSelect",p,ae.setState),a8("snapToGrid",z,ae.setState),a8("snapGrid",y,ae.setState),a8("onNodesChange",t,ae.setState),a8("onEdgesChange",v,ae.setState),a8("connectOnClick",B,ae.setState),a8("fitViewOnInit",D,ae.setState),a8("fitViewOnInitOptions",E,ae.setState),a8("onNodesDelete",F,ae.setState),a8("onEdgesDelete",G,ae.setState),a8("onNodeDrag",H,ae.setState),a8("onNodeDragStart",I,ae.setState),a8("onNodeDragStop",J,ae.setState),a8("onSelectionDrag",K,ae.setState),a8("onSelectionDragStart",N,ae.setState),a8("onSelectionDragStop",O,ae.setState),a8("noPanClassName",P,ae.setState),a8("nodeOrigin",Q,ae.setState),a8("rfId",R,ae.setState),a8("autoPanOnConnect",S,ae.setState),a8("autoPanOnNodeDrag",T,ae.setState),a8("onError",U,ae.setState),a8("connectionRadius",V,ae.setState),a8("isValidConnection",W,ae.setState),a8("nodeDragThreshold",X,ae.setState),a7(a,Y),a7(b,Z),a7(q,_),a7(r,aa),a7(A,ab),a7(s,ac),null},ba={display:"none"},bb={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},bc="react-flow__node-desc",bd="react-flow__edge-desc",be=a=>a.ariaLiveMessage;function bf({rfId:a}){let b=L(be);return l.createElement("div",{id:`react-flow__aria-live-${a}`,"aria-live":"assertive","aria-atomic":"true",style:bb},b)}function bg({rfId:a,disableKeyboardA11y:b}){return l.createElement(l.Fragment,null,l.createElement("div",{id:`${bc}-${a}`,style:ba},"Press enter or space to select a node.",!b&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),l.createElement("div",{id:`${bd}-${a}`,style:ba},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!b&&l.createElement(bf,{rfId:a}))}var bh=(a=null,b={actInsideInputWithModifier:!0})=>{let[c,d]=(0,l.useState)(!1),e=(0,l.useRef)(!1),f=(0,l.useRef)(new Set([])),[g,h]=(0,l.useMemo)(()=>{if(null!==a){let b=(Array.isArray(a)?a:[a]).filter(a=>"string"==typeof a).map(a=>a.split("+")),c=b.reduce((a,b)=>a.concat(...b),[]);return[b,c]}return[[],[]]},[a]);return(0,l.useEffect)(()=>{let c=b?.target||("undefined"!=typeof document?document:null);if(null!==a){let a=a=>{if(e.current=a.ctrlKey||a.metaKey||a.shiftKey,(!e.current||e.current&&!b.actInsideInputWithModifier)&&ae(a))return!1;let c=bj(a.code,h);f.current.add(a[c]),bi(g,f.current,!1)&&(a.preventDefault(),d(!0))},i=a=>{if((!e.current||e.current&&!b.actInsideInputWithModifier)&&ae(a))return!1;let c=bj(a.code,h);bi(g,f.current,!0)?(d(!1),f.current.clear()):f.current.delete(a[c]),"Meta"===a.key&&f.current.clear(),e.current=!1},j=()=>{f.current.clear(),d(!1)};return c?.addEventListener("keydown",a),c?.addEventListener("keyup",i),window.addEventListener("blur",j),()=>{c?.removeEventListener("keydown",a),c?.removeEventListener("keyup",i),window.removeEventListener("blur",j)}}},[a,d]),c};function bi(a,b,c){return a.filter(a=>c||a.length===b.size).some(a=>a.every(a=>b.has(a)))}function bj(a,b){return b.includes(a)?"code":"key"}function bk(a,b,c){a.forEach(d=>{let e=d.parentNode||d.parentId;if(e&&!a.has(e))throw Error(`Parent node ${e} not found`);if(e||c?.[d.id]){let{x:e,y:f,z:g}=function a(b,c,d,e){let f=b.parentNode||b.parentId;if(!f)return d;let g=c.get(f),h=aE(g,e);return a(g,c,{x:(d.x??0)+h.x,y:(d.y??0)+h.y,z:(g[ab]?.z??0)>(d.z??0)?g[ab]?.z??0:d.z??0},e)}(d,a,{...d.position,z:d[ab]?.z??0},b);d.positionAbsolute={x:e,y:f},d[ab].z=g,c?.[d.id]&&(d[ab].isParent=!0)}})}function bl(a,b,c,d){let e=new Map,f={},g=1e3*!!d;return a.forEach(a=>{let c=(aa(a.zIndex)?a.zIndex:0)+(a.selected?g:0),d=b.get(a.id),h={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},i=a.parentNode||a.parentId;i&&(f[i]=!0),Object.defineProperty(h,ab,{enumerable:!1,value:{handleBounds:d?.type&&d?.type!==a.type?void 0:d?.[ab]?.handleBounds,z:c}}),e.set(a.id,h)}),bk(e,c,f),e}function bm(a,b={}){let{getNodes:c,width:d,height:e,minZoom:f,maxZoom:g,d3Zoom:h,d3Selection:i,fitViewOnInitDone:j,fitViewOnInit:k,nodeOrigin:l}=a(),m=b.initial&&!j&&k;if(h&&i&&(m||!b.initial)){let a=c().filter(a=>{let c=b.includeHiddenNodes?a.width&&a.height:!a.hidden;return b.nodes?.length?c&&b.nodes.some(b=>b.id===a.id):c}),j=a.every(a=>a.width&&a.height);if(a.length>0&&j){let{x:c,y:j,zoom:k}=aI(aF(a,l),d,e,b.minZoom??f,b.maxZoom??g,b.padding??.1),m=v.GS.translate(c,j).scale(k);return"number"==typeof b.duration&&b.duration>0?h.transform(aJ(i,b.duration),m):h.transform(i,m),!0}}return!1}function bn({changedNodes:a,changedEdges:b,get:c,set:d}){let{nodeInternals:e,edges:f,onNodesChange:g,onEdgesChange:h,hasDefaultNodes:i,hasDefaultEdges:j}=c();a?.length&&(i&&d({nodeInternals:(a.forEach(a=>{let b=e.get(a.id);b&&e.set(b.id,{...b,[ab]:b[ab],selected:a.selected})}),new Map(e))}),g?.(a)),b?.length&&(j&&d({edges:f.map(a=>{let c=b.find(b=>b.id===a.id);return c&&(a.selected=c.selected),a})}),h?.(b))}let bo=()=>{},bp={zoomIn:bo,zoomOut:bo,zoomTo:bo,getZoom:()=>1,setViewport:bo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:bo,fitBounds:bo,project:a=>a,screenToFlowPosition:a=>a,flowToScreenPosition:a=>a,viewportInitialized:!1},bq=a=>({d3Zoom:a.d3Zoom,d3Selection:a.d3Selection});function br(){let a=(()=>{let a=M(),{d3Zoom:b,d3Selection:c}=L(bq,u);return(0,l.useMemo)(()=>c&&b?{zoomIn:a=>b.scaleBy(aJ(c,a?.duration),1.2),zoomOut:a=>b.scaleBy(aJ(c,a?.duration),1/1.2),zoomTo:(a,d)=>b.scaleTo(aJ(c,d?.duration),a),getZoom:()=>a.getState().transform[2],setViewport:(d,e)=>{let[f,g,h]=a.getState().transform,i=v.GS.translate(d.x??f,d.y??g).scale(d.zoom??h);b.transform(aJ(c,e?.duration),i)},getViewport:()=>{let[b,c,d]=a.getState().transform;return{x:b,y:c,zoom:d}},fitView:b=>bm(a.getState,b),setCenter:(d,e,f)=>{let{width:g,height:h,maxZoom:i}=a.getState(),j=void 0!==f?.zoom?f.zoom:i,k=g/2-d*j,l=h/2-e*j,m=v.GS.translate(k,l).scale(j);b.transform(aJ(c,f?.duration),m)},fitBounds:(d,e)=>{let{width:f,height:g,minZoom:h,maxZoom:i}=a.getState(),{x:j,y:k,zoom:l}=aI(d,f,g,h,i,e?.padding??.1),m=v.GS.translate(j,k).scale(l);b.transform(aJ(c,e?.duration),m)},project:b=>{let{transform:c,snapToGrid:d,snapGrid:e}=a.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),aC(b,c,d,e)},screenToFlowPosition:b=>{let{transform:c,snapToGrid:d,snapGrid:e,domNode:f}=a.getState();if(!f)return b;let{x:g,y:h}=f.getBoundingClientRect();return aC({x:b.x-g,y:b.y-h},c,d,e)},flowToScreenPosition:b=>{let{transform:c,domNode:d}=a.getState();if(!d)return b;let{x:e,y:f}=d.getBoundingClientRect(),g=aD(b,c);return{x:g.x+e,y:g.y+f}},viewportInitialized:!0}:bp,[b,c])})(),b=M(),c=(0,l.useCallback)(()=>b.getState().getNodes().map(a=>({...a})),[]),d=(0,l.useCallback)(a=>b.getState().nodeInternals.get(a),[]),e=(0,l.useCallback)(()=>{let{edges:a=[]}=b.getState();return a.map(a=>({...a}))},[]),f=(0,l.useCallback)(a=>{let{edges:c=[]}=b.getState();return c.find(b=>b.id===a)},[]),g=(0,l.useCallback)(a=>{let{getNodes:c,setNodes:d,hasDefaultNodes:e,onNodesChange:f}=b.getState(),g=c(),h="function"==typeof a?a(g):a;e?d(h):f&&f(0===h.length?g.map(a=>({type:"remove",id:a.id})):h.map(a=>({item:a,type:"reset"})))},[]),h=(0,l.useCallback)(a=>{let{edges:c=[],setEdges:d,hasDefaultEdges:e,onEdgesChange:f}=b.getState(),g="function"==typeof a?a(c):a;e?d(g):f&&f(0===g.length?c.map(a=>({type:"remove",id:a.id})):g.map(a=>({item:a,type:"reset"})))},[]),i=(0,l.useCallback)(a=>{let c=Array.isArray(a)?a:[a],{getNodes:d,setNodes:e,hasDefaultNodes:f,onNodesChange:g}=b.getState();f?e([...d(),...c]):g&&g(c.map(a=>({item:a,type:"add"})))},[]),j=(0,l.useCallback)(a=>{let c=Array.isArray(a)?a:[a],{edges:d=[],setEdges:e,hasDefaultEdges:f,onEdgesChange:g}=b.getState();f?e([...d,...c]):g&&g(c.map(a=>({item:a,type:"add"})))},[]),k=(0,l.useCallback)(()=>{let{getNodes:a,edges:c=[],transform:d}=b.getState(),[e,f,g]=d;return{nodes:a().map(a=>({...a})),edges:c.map(a=>({...a})),viewport:{x:e,y:f,zoom:g}}},[]),m=(0,l.useCallback)(({nodes:a,edges:c})=>{let{nodeInternals:d,getNodes:e,edges:f,hasDefaultNodes:g,hasDefaultEdges:h,onNodesDelete:i,onEdgesDelete:j,onNodesChange:k,onEdgesChange:l}=b.getState(),m=(a||[]).map(a=>a.id),n=(c||[]).map(a=>a.id),o=e().reduce((a,b)=>{let c=b.parentNode||b.parentId,d=!m.includes(b.id)&&c&&a.find(a=>a.id===c);return("boolean"!=typeof b.deletable||b.deletable)&&(m.includes(b.id)||d)&&a.push(b),a},[]),p=f.filter(a=>"boolean"!=typeof a.deletable||a.deletable),q=p.filter(a=>n.includes(a.id));if(o||q){let a=[...q,...aH(o,p)],c=a.reduce((a,b)=>(a.includes(b.id)||a.push(b.id),a),[]);(h||g)&&(h&&b.setState({edges:f.filter(a=>!c.includes(a.id))}),g&&(o.forEach(a=>{d.delete(a.id)}),b.setState({nodeInternals:new Map(d)}))),c.length>0&&(j?.(a),l&&l(c.map(a=>({id:a,type:"remove"})))),o.length>0&&(i?.(o),k&&k(o.map(a=>({id:a.id,type:"remove"}))))}},[]),n=(0,l.useCallback)(a=>{let c=aa(a.width)&&aa(a.height)&&aa(a.x)&&aa(a.y),d=c?null:b.getState().nodeInternals.get(a.id);return c||d?[c?a:$(d),d,c]:[null,null,c]},[]),o=(0,l.useCallback)((a,c=!0,d)=>{let[e,f,g]=n(a);return e?(d||b.getState().getNodes()).filter(a=>{if(!g&&(a.id===f.id||!a.positionAbsolute))return!1;let b=_($(a),e);return c&&b>0||b>=e.width*e.height}):[]},[]),p=(0,l.useCallback)((a,b,c=!0)=>{let[d]=n(a);if(!d)return!1;let e=_(d,b);return c&&e>0||e>=d.width*d.height},[]);return(0,l.useMemo)(()=>({...a,getNodes:c,getNode:d,getEdges:e,getEdge:f,setNodes:g,setEdges:h,addNodes:i,addEdges:j,toObject:k,deleteElements:m,getIntersectingNodes:o,isNodeIntersecting:p}),[a,c,d,e,f,g,h,i,j,k,m,o,p])}let bs={actInsideInputWithModifier:!1},bt={position:"absolute",width:"100%",height:"100%",top:0,left:0},bu=a=>({x:a.x,y:a.y,zoom:a.k}),bv=(a,b)=>a.target.closest(`.${b}`),bw=(a,b)=>2===b&&Array.isArray(a)&&a.includes(2),bx=a=>{let b=a.ctrlKey&&ag()?10:1;return-a.deltaY*(1===a.deltaMode?.05:a.deltaMode?1:.002)*b},by=a=>({d3Zoom:a.d3Zoom,d3Selection:a.d3Selection,d3ZoomHandler:a.d3ZoomHandler,userSelectionActive:a.userSelectionActive}),bz=({onMove:a,onMoveStart:b,onMoveEnd:c,onPaneContextMenu:d,zoomOnScroll:f=!0,zoomOnPinch:g=!0,panOnScroll:h=!1,panOnScrollSpeed:i=.5,panOnScrollMode:j=e.Free,zoomOnDoubleClick:k=!0,elementsSelectable:m,panOnDrag:n=!0,defaultViewport:o,translateExtent:p,minZoom:q,maxZoom:r,zoomActivationKeyCode:s,preventScrolling:t=!0,children:y,noWheelClassName:z,noPanClassName:A})=>{let B=(0,l.useRef)(),C=M(),D=(0,l.useRef)(!1),E=(0,l.useRef)(!1),F=(0,l.useRef)(null),G=(0,l.useRef)({x:0,y:0,zoom:0}),{d3Zoom:H,d3Selection:I,d3ZoomHandler:K,userSelectionActive:N}=L(by,u),O=bh(s),P=(0,l.useRef)(0),Q=(0,l.useRef)(!1),T=(0,l.useRef)();return!function(a){let b=M();(0,l.useEffect)(()=>{let c,d=()=>{if(!a.current)return;let c=R(a.current);(0===c.height||0===c.width)&&b.getState().onError?.("004",J.error004()),b.setState({width:c.width||500,height:c.height||500})};return d(),window.addEventListener("resize",d),a.current&&(c=new ResizeObserver(()=>d())).observe(a.current),()=>{window.removeEventListener("resize",d),c&&a.current&&c.unobserve(a.current)}},[])}(F),(0,l.useEffect)(()=>{if(F.current){let a=F.current.getBoundingClientRect(),b=(0,v.s_)().scaleExtent([q,r]).translateExtent(p),c=(0,w.A)(F.current).call(b),d=v.GS.translate(o.x,o.y).scale(S(o.zoom,q,r)),e=[[0,0],[a.width,a.height]],f=b.constrain()(d,e,p);b.transform(c,f),b.wheelDelta(bx),C.setState({d3Zoom:b,d3Selection:c,d3ZoomHandler:c.on("wheel.zoom"),transform:[f.x,f.y,f.k],domNode:F.current.closest(".react-flow")})}},[]),(0,l.useEffect)(()=>{I&&H&&(!h||O||N?void 0!==K&&I.on("wheel.zoom",function(a,b){if(!t&&"wheel"===a.type&&!a.ctrlKey||bv(a,z))return null;a.preventDefault(),K.call(this,a,b)},{passive:!1}):I.on("wheel.zoom",d=>{if(bv(d,z))return!1;d.preventDefault(),d.stopImmediatePropagation();let f=I.property("__zoom").k||1;if(d.ctrlKey&&g){let a=(0,x.A)(d),b=f*Math.pow(2,bx(d));H.scaleTo(I,b,a,d);return}let h=1===d.deltaMode?20:1,k=j===e.Vertical?0:d.deltaX*h,l=j===e.Horizontal?0:d.deltaY*h;!ag()&&d.shiftKey&&j!==e.Vertical&&(k=d.deltaY*h,l=0),H.translateBy(I,-(k/f)*i,-(l/f)*i,{internal:!0});let m=bu(I.property("__zoom")),{onViewportChangeStart:n,onViewportChange:o,onViewportChangeEnd:p}=C.getState();clearTimeout(T.current),Q.current||(Q.current=!0,b?.(d,m),n?.(m)),Q.current&&(a?.(d,m),o?.(m),T.current=setTimeout(()=>{c?.(d,m),p?.(m),Q.current=!1},150))},{passive:!1}))},[N,h,j,I,H,K,O,g,t,z,b,a,c]),(0,l.useEffect)(()=>{H&&H.on("start",a=>{if(!a.sourceEvent||a.sourceEvent.internal)return null;P.current=a.sourceEvent?.button;let{onViewportChangeStart:c}=C.getState(),d=bu(a.transform);D.current=!0,G.current=d,a.sourceEvent?.type==="mousedown"&&C.setState({paneDragging:!0}),c?.(d),b?.(a.sourceEvent,d)})},[H,b]),(0,l.useEffect)(()=>{H&&(N&&!D.current?H.on("zoom",null):N||H.on("zoom",b=>{let{onViewportChange:c}=C.getState();if(C.setState({transform:[b.transform.x,b.transform.y,b.transform.k]}),E.current=!!(d&&bw(n,P.current??0)),(a||c)&&!b.sourceEvent?.internal){let d=bu(b.transform);c?.(d),a?.(b.sourceEvent,d)}}))},[N,H,a,n,d]),(0,l.useEffect)(()=>{H&&H.on("end",a=>{if(!a.sourceEvent||a.sourceEvent.internal)return null;let{onViewportChangeEnd:b}=C.getState();if(D.current=!1,C.setState({paneDragging:!1}),d&&bw(n,P.current??0)&&!E.current&&d(a.sourceEvent),E.current=!1,(c||b)&&((a,b)=>a.x!==b.x||a.y!==b.y||a.zoom!==b.k)(G.current,a.transform)){let d=bu(a.transform);G.current=d,clearTimeout(B.current),B.current=setTimeout(()=>{b?.(d),c?.(a.sourceEvent,d)},150*!!h)}})},[H,h,n,c,d]),(0,l.useEffect)(()=>{H&&H.filter(a=>{let b=O||f,c=g&&a.ctrlKey;if((!0===n||Array.isArray(n)&&n.includes(1))&&1===a.button&&"mousedown"===a.type&&(bv(a,"react-flow__node")||bv(a,"react-flow__edge")))return!0;if(!n&&!b&&!h&&!k&&!g||N||!k&&"dblclick"===a.type||bv(a,z)&&"wheel"===a.type||bv(a,A)&&("wheel"!==a.type||h&&"wheel"===a.type&&!O)||!g&&a.ctrlKey&&"wheel"===a.type||!b&&!h&&!c&&"wheel"===a.type||!n&&("mousedown"===a.type||"touchstart"===a.type)||Array.isArray(n)&&!n.includes(a.button)&&"mousedown"===a.type)return!1;let d=Array.isArray(n)&&n.includes(a.button)||!a.button||a.button<=1;return(!a.ctrlKey||"wheel"===a.type)&&d})},[N,H,f,g,h,k,n,m,O]),l.createElement("div",{className:"react-flow__renderer",ref:F,style:bt},y)},bA=a=>({userSelectionActive:a.userSelectionActive,userSelectionRect:a.userSelectionRect});function bB(){let{userSelectionActive:a,userSelectionRect:b}=L(bA,u);return a&&b?l.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:b.width,height:b.height,transform:`translate(${b.x}px, ${b.y}px)`}}):null}function bC(a,b){let c=b.parentNode||b.parentId,d=a.find(a=>a.id===c);if(d){let a=b.position.x+b.width-d.width,c=b.position.y+b.height-d.height;if(a>0||c>0||b.position.x<0||b.position.y<0){if(d.style={...d.style},d.style.width=d.style.width??d.width,d.style.height=d.style.height??d.height,a>0&&(d.style.width+=a),c>0&&(d.style.height+=c),b.position.x<0){let a=Math.abs(b.position.x);d.position.x=d.position.x-a,d.style.width+=a,b.position.x=0}if(b.position.y<0){let a=Math.abs(b.position.y);d.position.y=d.position.y-a,d.style.height+=a,b.position.y=0}d.width=d.style.width,d.height=d.style.height}}}function bD(a,b){if(a.some(a=>"reset"===a.type))return a.filter(a=>"reset"===a.type).map(a=>a.item);let c=a.filter(a=>"add"===a.type).map(a=>a.item);return b.reduce((b,c)=>{let d=a.filter(a=>a.id===c.id);if(0===d.length)return b.push(c),b;let e={...c};for(let a of d)if(a)switch(a.type){case"select":e.selected=a.selected;break;case"position":void 0!==a.position&&(e.position=a.position),void 0!==a.positionAbsolute&&(e.positionAbsolute=a.positionAbsolute),void 0!==a.dragging&&(e.dragging=a.dragging),e.expandParent&&bC(b,e);break;case"dimensions":void 0!==a.dimensions&&(e.width=a.dimensions.width,e.height=a.dimensions.height),void 0!==a.updateStyle&&(e.style={...e.style||{},...a.dimensions}),"boolean"==typeof a.resizing&&(e.resizing=a.resizing),e.expandParent&&bC(b,e);break;case"remove":return b}return b.push(e),b},c)}function bE(a,b){return bD(a,b)}let bF=(a,b)=>({id:a,type:"select",selected:b});function bG(a,b){return a.reduce((a,c)=>{let d=b.includes(c.id);return!c.selected&&d?(c.selected=!0,a.push(bF(c.id,!0))):c.selected&&!d&&(c.selected=!1,a.push(bF(c.id,!1))),a},[])}let bH=(a,b)=>c=>{c.target===b.current&&a?.(c)},bI=a=>({userSelectionActive:a.userSelectionActive,elementsSelectable:a.elementsSelectable,dragging:a.paneDragging}),bJ=(0,l.memo)(({isSelecting:a,selectionMode:b=f.Full,panOnDrag:c,onSelectionStart:d,onSelectionEnd:e,onPaneClick:g,onPaneContextMenu:h,onPaneScroll:i,onPaneMouseEnter:j,onPaneMouseMove:k,onPaneMouseLeave:n,children:o})=>{let p=(0,l.useRef)(null),q=M(),r=(0,l.useRef)(0),s=(0,l.useRef)(0),t=(0,l.useRef)(),{userSelectionActive:v,elementsSelectable:w,dragging:x}=L(bI,u),y=()=>{q.setState({userSelectionActive:!1,userSelectionRect:null}),r.current=0,s.current=0},z=a=>{g?.(a),q.getState().resetSelectedElements(),q.setState({nodesSelectionActive:!1})},A=w&&(a||v);return l.createElement("div",{className:m(["react-flow__pane",{dragging:x,selection:a}]),onClick:A?void 0:bH(z,p),onContextMenu:bH(a=>{if(Array.isArray(c)&&c?.includes(2))return void a.preventDefault();h?.(a)},p),onWheel:bH(i?a=>i(a):void 0,p),onMouseEnter:A?void 0:j,onMouseDown:A?b=>{let{resetSelectedElements:c,domNode:e}=q.getState();if(t.current=e?.getBoundingClientRect(),!w||!a||0!==b.button||b.target!==p.current||!t.current)return;let{x:f,y:g}=af(b,t.current);c(),q.setState({userSelectionRect:{width:0,height:0,startX:f,startY:g,x:f,y:g}}),d?.(b)}:void 0,onMouseMove:A?c=>{let{userSelectionRect:d,nodeInternals:e,edges:g,transform:h,onNodesChange:i,onEdgesChange:j,nodeOrigin:k,getNodes:l}=q.getState();if(!a||!t.current||!d)return;q.setState({userSelectionActive:!0,nodesSelectionActive:!1});let m=af(c,t.current),n=d.startX??0,o=d.startY??0,p={...d,x:m.x<n?m.x:n,y:m.y<o?m.y:o,width:Math.abs(m.x-n),height:Math.abs(m.y-o)},u=l(),v=aG(e,p,h,b===f.Partial,!0,k),w=aH(v,g).map(a=>a.id),x=v.map(a=>a.id);if(r.current!==x.length){r.current=x.length;let a=bG(u,x);a.length&&i?.(a)}if(s.current!==w.length){s.current=w.length;let a=bG(g,w);a.length&&j?.(a)}q.setState({userSelectionRect:p})}:k,onMouseUp:A?a=>{if(0!==a.button)return;let{userSelectionRect:b}=q.getState();!v&&b&&a.target===p.current&&z?.(a),q.setState({nodesSelectionActive:r.current>0}),y(),e?.(a)}:void 0,onMouseLeave:A?a=>{v&&(q.setState({nodesSelectionActive:r.current>0}),e?.(a)),y()}:n,ref:p,style:bt},o,l.createElement(bB,null))});function bK(a,b,c){let d=a;do{if(d?.matches(b))return!0;if(d===c.current)break;d=d.parentElement}while(d);return!1}function bL(a,b,c,d,e=[0,0],f){var g;let h=(g=a.extent||d)&&"parent"!==g?[g[0],[g[1][0]-(a.width||0),g[1][1]-(a.height||0)]]:g,i=h,j=a.parentNode||a.parentId;if("parent"!==a.extent||a.expandParent){if(a.extent&&j&&"parent"!==a.extent){let{x:b,y:d}=aE(c.get(j),e).positionAbsolute;i=[[a.extent[0][0]+b,a.extent[0][1]+d],[a.extent[1][0]+b,a.extent[1][1]+d]]}}else if(j&&a.width&&a.height){let b=c.get(j),{x:d,y:f}=aE(b,e).positionAbsolute;i=b&&aa(d)&&aa(f)&&aa(b.width)&&aa(b.height)?[[d+a.width*e[0],f+a.height*e[1]],[d+b.width-a.width+a.width*e[0],f+b.height-a.height+a.height*e[1]]]:i}else f?.("005",J.error005()),i=h;let k={x:0,y:0};j&&(k=aE(c.get(j),e).positionAbsolute);let l=i&&"parent"!==i?T(b,i):b;return{position:{x:l.x-k.x,y:l.y-k.y},positionAbsolute:l}}function bM({nodeId:a,dragItems:b,nodeInternals:c}){let d=b.map(a=>({...c.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[a?d.find(b=>b.id===a):d[0],d]}bJ.displayName="Pane";let bN=(a,b,c,d)=>{let e=b.querySelectorAll(a);if(!e||!e.length)return null;let f=Array.from(e),g=b.getBoundingClientRect(),h={x:g.width*d[0],y:g.height*d[1]};return f.map(a=>{let b=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(b.left-g.left-h.x)/c,y:(b.top-g.top-h.y)/c,...R(a)}})};function bO(a,b,c){return void 0===c?c:d=>{let e=b().nodeInternals.get(a);e&&c(d,{...e})}}function bP({id:a,store:b,unselect:c=!1,nodeRef:d}){let{addSelectedNodes:e,unselectNodesAndEdges:f,multiSelectionActive:g,nodeInternals:h,onError:i}=b.getState(),j=h.get(a);if(!j)return void i?.("012",J.error012(a));b.setState({nodesSelectionActive:!1}),j.selected?(c||j.selected&&g)&&(f({nodes:[j],edges:[]}),requestAnimationFrame(()=>d?.current?.blur())):e([a])}function bQ(a){return(b,c,d)=>a?.(b,d)}function bR({nodeRef:a,disabled:b=!1,noDragClassName:c,handleSelector:d,nodeId:e,isSelectable:f,selectNodesOnDrag:g}){let h=M(),[i,j]=(0,l.useState)(!1),k=(0,l.useRef)([]),m=(0,l.useRef)({x:null,y:null}),n=(0,l.useRef)(0),o=(0,l.useRef)(null),p=(0,l.useRef)({x:0,y:0}),q=(0,l.useRef)(null),r=(0,l.useRef)(!1),s=(0,l.useRef)(!1),t=(0,l.useRef)(!1),u=function(){let a=M();return(0,l.useCallback)(({sourceEvent:b})=>{let{transform:c,snapGrid:d,snapToGrid:e}=a.getState(),f=b.touches?b.touches[0].clientX:b.clientX,g=b.touches?b.touches[0].clientY:b.clientY,h={x:(f-c[0])/c[2],y:(g-c[1])/c[2]};return{xSnapped:e?d[0]*Math.round(h.x/d[0]):h.x,ySnapped:e?d[1]*Math.round(h.y/d[1]):h.y,...h}},[])}();return(0,l.useEffect)(()=>{if(a?.current){let i=(0,w.A)(a.current),l=({x:a,y:b})=>{let{nodeInternals:c,onNodeDrag:d,onSelectionDrag:f,updateNodePositions:g,nodeExtent:i,snapGrid:l,snapToGrid:n,nodeOrigin:o,onError:p}=h.getState();m.current={x:a,y:b};let r=!1,s={x:0,y:0,x2:0,y2:0};if(k.current.length>1&&i&&(s=Y(aF(k.current,o))),k.current=k.current.map(d=>{let e={x:a-d.distance.x,y:b-d.distance.y};n&&(e.x=l[0]*Math.round(e.x/l[0]),e.y=l[1]*Math.round(e.y/l[1]));let f=[[i[0][0],i[0][1]],[i[1][0],i[1][1]]];k.current.length>1&&i&&!d.extent&&(f[0][0]=d.positionAbsolute.x-s.x+i[0][0],f[1][0]=d.positionAbsolute.x+(d.width??0)-s.x2+i[1][0],f[0][1]=d.positionAbsolute.y-s.y+i[0][1],f[1][1]=d.positionAbsolute.y+(d.height??0)-s.y2+i[1][1]);let g=bL(d,e,c,f,o,p);return r=r||d.position.x!==g.position.x||d.position.y!==g.position.y,d.position=g.position,d.positionAbsolute=g.positionAbsolute,d}),!r)return;g(k.current,!0,!0),j(!0);let t=e?d:bQ(f);if(t&&q.current){let[a,b]=bM({nodeId:e,dragItems:k.current,nodeInternals:c});t(q.current,a,b)}},v=()=>{if(!o.current)return;let[a,b]=V(p.current,o.current);if(0!==a||0!==b){let{transform:c,panBy:d}=h.getState();m.current.x=(m.current.x??0)-a/c[2],m.current.y=(m.current.y??0)-b/c[2],d({x:a,y:b})&&l(m.current)}n.current=requestAnimationFrame(v)},H=b=>{let{nodeInternals:c,multiSelectionActive:d,nodesDraggable:i,unselectNodesAndEdges:j,onNodeDragStart:l,onSelectionDragStart:n}=h.getState();s.current=!0;let o=e?l:bQ(n);g&&f||d||!e||c.get(e)?.selected||j(),e&&f&&g&&bP({id:e,store:h,nodeRef:a});let p=u(b);if(m.current=p,k.current=Array.from(c.values()).filter(a=>(a.selected||a.id===e)&&(!a.parentNode||a.parentId||!function a(b,c){let d=b.parentNode||b.parentId;if(!d)return!1;let e=c.get(d);return!!e&&(!!e.selected||a(e,c))}(a,c))&&(a.draggable||i&&void 0===a.draggable)).map(a=>({id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:p.x-(a.positionAbsolute?.x??0),y:p.y-(a.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent})),o&&k.current){let[a,d]=bM({nodeId:e,dragItems:k.current,nodeInternals:c});o(b.sourceEvent,a,d)}};if(b)i.on(".drag",null);else{let b=(function(){var a,b,c,d,e=D,f=E,g=F,h=G,i={},j=(0,y.A)("start","drag","end"),k=0,l=0;function m(a){a.on("mousedown.drag",n).filter(h).on("touchstart.drag",q).on("touchmove.drag",r,A.vr).on("touchend.drag touchcancel.drag",s).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function n(g,h){if(!d&&e.call(this,g,h)){var i=t(this,f.call(this,g,h),g,h,"mouse");i&&((0,w.A)(g.view).on("mousemove.drag",o,A.Rw).on("mouseup.drag",p,A.Rw),(0,z.A)(g.view),(0,A.GK)(g),c=!1,a=g.clientX,b=g.clientY,i("start",g))}}function o(d){if((0,A.Ay)(d),!c){var e=d.clientX-a,f=d.clientY-b;c=e*e+f*f>l}i.mouse("drag",d)}function p(a){(0,w.A)(a.view).on("mousemove.drag mouseup.drag",null),(0,z.y)(a.view,c),(0,A.Ay)(a),i.mouse("end",a)}function q(a,b){if(e.call(this,a,b)){var c,d,g=a.changedTouches,h=f.call(this,a,b),i=g.length;for(c=0;c<i;++c)(d=t(this,h,a,b,g[c].identifier,g[c]))&&((0,A.GK)(a),d("start",a,g[c]))}}function r(a){var b,c,d=a.changedTouches,e=d.length;for(b=0;b<e;++b)(c=i[d[b].identifier])&&((0,A.Ay)(a),c("drag",a,d[b]))}function s(a){var b,c,e=a.changedTouches,f=e.length;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),b=0;b<f;++b)(c=i[e[b].identifier])&&((0,A.GK)(a),c("end",a,e[b]))}function t(a,b,c,d,e,f){var h,l,n,o=j.copy(),p=(0,x.A)(f||c,b);if(null!=(n=g.call(a,new C("beforestart",{sourceEvent:c,target:m,identifier:e,active:k,x:p[0],y:p[1],dx:0,dy:0,dispatch:o}),d)))return h=n.x-p[0]||0,l=n.y-p[1]||0,function c(f,g,j){var q,r=p;switch(f){case"start":i[e]=c,q=k++;break;case"end":delete i[e],--k;case"drag":p=(0,x.A)(j||g,b),q=k}o.call(f,a,new C(f,{sourceEvent:g,subject:n,target:m,identifier:e,active:q,x:p[0]+h,y:p[1]+l,dx:p[0]-r[0],dy:p[1]-r[1],dispatch:o}),d)}}return m.filter=function(a){return arguments.length?(e="function"==typeof a?a:B(!!a),m):e},m.container=function(a){return arguments.length?(f="function"==typeof a?a:B(a),m):f},m.subject=function(a){return arguments.length?(g="function"==typeof a?a:B(a),m):g},m.touchable=function(a){return arguments.length?(h="function"==typeof a?a:B(!!a),m):h},m.on=function(){var a=j.on.apply(j,arguments);return a===j?m:a},m.clickDistance=function(a){return arguments.length?(l=(a*=1)*a,m):Math.sqrt(l)},m})().on("start",a=>{let{domNode:b,nodeDragThreshold:c}=h.getState();0===c&&H(a),t.current=!1,m.current=u(a),o.current=b?.getBoundingClientRect()||null,p.current=af(a.sourceEvent,o.current)}).on("drag",a=>{let b=u(a),{autoPanOnNodeDrag:c,nodeDragThreshold:d}=h.getState();if("touchmove"===a.sourceEvent.type&&a.sourceEvent.touches.length>1&&(t.current=!0),!t.current){if(!r.current&&s.current&&c&&(r.current=!0,v()),!s.current){let c=b.xSnapped-(m?.current?.x??0),e=b.ySnapped-(m?.current?.y??0);Math.sqrt(c*c+e*e)>d&&H(a)}(m.current.x!==b.xSnapped||m.current.y!==b.ySnapped)&&k.current&&s.current&&(q.current=a.sourceEvent,p.current=af(a.sourceEvent,o.current),l(b))}}).on("end",a=>{if(s.current&&!t.current&&(j(!1),r.current=!1,s.current=!1,cancelAnimationFrame(n.current),k.current)){let{updateNodePositions:b,nodeInternals:c,onNodeDragStop:d,onSelectionDragStop:f}=h.getState(),g=e?d:bQ(f);if(b(k.current,!1,!1),g){let[b,d]=bM({nodeId:e,dragItems:k.current,nodeInternals:c});g(a.sourceEvent,b,d)}}}).filter(b=>{let e=b.target;return!b.button&&(!c||!bK(e,`.${c}`,a))&&(!d||bK(e,d,a))});return i.call(b),()=>{i.on(".drag",null)}}}},[a,b,c,d,f,h,e,g,u]),i}function bS(){let a=M();return(0,l.useCallback)(b=>{let{nodeInternals:c,nodeExtent:d,updateNodePositions:e,getNodes:f,snapToGrid:g,snapGrid:h,onError:i,nodesDraggable:j}=a.getState(),k=f().filter(a=>a.selected&&(a.draggable||j&&void 0===a.draggable)),l=g?h[0]:5,m=g?h[1]:5,n=b.isShiftPressed?4:1,o=b.x*l*n,p=b.y*m*n;e(k.map(a=>{if(a.positionAbsolute){let b={x:a.positionAbsolute.x+o,y:a.positionAbsolute.y+p};g&&(b.x=h[0]*Math.round(b.x/h[0]),b.y=h[1]*Math.round(b.y/h[1]));let{positionAbsolute:e,position:f}=bL(a,b,c,d,void 0,i);a.position=f,a.positionAbsolute=e}return a}),!0,!1)},[])}let bT={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var bU=a=>{let b=({id:b,type:c,data:d,xPos:e,yPos:f,xPosOrigin:g,yPosOrigin:h,selected:i,onClick:j,onMouseEnter:k,onMouseMove:n,onMouseLeave:o,onContextMenu:p,onDoubleClick:q,style:r,className:s,isDraggable:t,isSelectable:u,isConnectable:v,isFocusable:w,selectNodesOnDrag:x,sourcePosition:y,targetPosition:z,hidden:A,resizeObserver:B,dragHandle:C,zIndex:D,isParent:E,noDragClassName:F,noPanClassName:G,initialized:H,disableKeyboardA11y:I,ariaLabel:J,rfId:K,hasHandleBounds:L})=>{let N=M(),O=(0,l.useRef)(null),P=(0,l.useRef)(null),Q=(0,l.useRef)(y),R=(0,l.useRef)(z),S=(0,l.useRef)(c),T=u||t||j||k||n||o,U=bS(),V=bO(b,N.getState,k),W=bO(b,N.getState,n),X=bO(b,N.getState,o),Y=bO(b,N.getState,p),Z=bO(b,N.getState,q);(0,l.useEffect)(()=>()=>{P.current&&(B?.unobserve(P.current),P.current=null)},[]),(0,l.useEffect)(()=>{if(O.current&&!A){let a=O.current;H&&L&&P.current===a||(P.current&&B?.unobserve(P.current),B?.observe(a),P.current=a)}},[A,H,L]),(0,l.useEffect)(()=>{let a=S.current!==c,d=Q.current!==y,e=R.current!==z;O.current&&(a||d||e)&&(a&&(S.current=c),d&&(Q.current=y),e&&(R.current=z),N.getState().updateNodeDimensions([{id:b,nodeElement:O.current,forceUpdate:!0}]))},[b,c,y,z]);let $=bR({nodeRef:O,disabled:A||!t,noDragClassName:F,handleSelector:C,nodeId:b,isSelectable:u,selectNodesOnDrag:x});return A?null:l.createElement("div",{className:m(["react-flow__node",`react-flow__node-${c}`,{[G]:t},s,{selected:i,selectable:u,parent:E,dragging:$}]),ref:O,style:{zIndex:D,transform:`translate(${g}px,${h}px)`,pointerEvents:T?"all":"none",visibility:H?"visible":"hidden",...r},"data-id":b,"data-testid":`rf__node-${b}`,onMouseEnter:V,onMouseMove:W,onMouseLeave:X,onContextMenu:Y,onClick:a=>{let{nodeDragThreshold:c}=N.getState();if(u&&(!x||!t||c>0)&&bP({id:b,store:N,nodeRef:O}),j){let c=N.getState().nodeInternals.get(b);c&&j(a,{...c})}},onDoubleClick:Z,onKeyDown:w?a=>{!ae(a)&&!I&&(ac.includes(a.key)&&u?bP({id:b,store:N,unselect:"Escape"===a.key,nodeRef:O}):t&&i&&Object.prototype.hasOwnProperty.call(bT,a.key)&&(N.setState({ariaLiveMessage:`Moved selected node ${a.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~e}, y: ${~~f}`}),U({x:bT[a.key].x,y:bT[a.key].y,isShiftPressed:a.shiftKey})))}:void 0,tabIndex:w?0:void 0,role:w?"button":void 0,"aria-describedby":I?void 0:`${bc}-${K}`,"aria-label":J},l.createElement(aA,{value:b},l.createElement(a,{id:b,data:d,type:c,xPos:e,yPos:f,selected:i,isConnectable:v,sourcePosition:y,targetPosition:z,dragging:$,dragHandle:C,zIndex:D})))};return b.displayName="NodeWrapper",(0,l.memo)(b)};let bV=a=>({...aF(a.getNodes().filter(a=>a.selected),a.nodeOrigin),transformString:`translate(${a.transform[0]}px,${a.transform[1]}px) scale(${a.transform[2]})`,userSelectionActive:a.userSelectionActive});var bW=(0,l.memo)(function({onSelectionContextMenu:a,noPanClassName:b,disableKeyboardA11y:c}){let d=M(),{width:e,height:f,x:g,y:h,transformString:i,userSelectionActive:j}=L(bV,u),k=bS(),n=(0,l.useRef)(null);if((0,l.useEffect)(()=>{c||n.current?.focus({preventScroll:!0})},[c]),bR({nodeRef:n}),j||!e||!f)return null;let o=a?b=>{a(b,d.getState().getNodes().filter(a=>a.selected))}:void 0;return l.createElement("div",{className:m(["react-flow__nodesselection","react-flow__container",b]),style:{transform:i}},l.createElement("div",{ref:n,className:"react-flow__nodesselection-rect",onContextMenu:o,tabIndex:c?void 0:-1,onKeyDown:c?void 0:a=>{Object.prototype.hasOwnProperty.call(bT,a.key)&&k({x:bT[a.key].x,y:bT[a.key].y,isShiftPressed:a.shiftKey})},style:{width:e,height:f,top:h,left:g}}))});let bX=a=>a.nodesSelectionActive,bY=({children:a,onPaneClick:b,onPaneMouseEnter:c,onPaneMouseMove:d,onPaneMouseLeave:e,onPaneContextMenu:f,onPaneScroll:g,deleteKeyCode:h,onMove:i,onMoveStart:j,onMoveEnd:k,selectionKeyCode:m,selectionOnDrag:n,selectionMode:o,onSelectionStart:p,onSelectionEnd:q,multiSelectionKeyCode:r,panActivationKeyCode:s,zoomActivationKeyCode:t,elementsSelectable:u,zoomOnScroll:v,zoomOnPinch:w,panOnScroll:x,panOnScrollSpeed:y,panOnScrollMode:z,zoomOnDoubleClick:A,panOnDrag:B,defaultViewport:C,translateExtent:D,minZoom:E,maxZoom:F,preventScrolling:G,onSelectionContextMenu:H,noWheelClassName:I,noPanClassName:J,disableKeyboardA11y:K})=>{let N=L(bX),O=bh(m),P=bh(s),Q=P||B,R=P||x,S=O||n&&!0!==Q;return(({deleteKeyCode:a,multiSelectionKeyCode:b})=>{let c=M(),{deleteElements:d}=br(),e=bh(a,bs),f=bh(b);(0,l.useEffect)(()=>{if(e){let{edges:a,getNodes:b}=c.getState();d({nodes:b().filter(a=>a.selected),edges:a.filter(a=>a.selected)}),c.setState({nodesSelectionActive:!1})}},[e]),(0,l.useEffect)(()=>{c.setState({multiSelectionActive:f})},[f])})({deleteKeyCode:h,multiSelectionKeyCode:r}),l.createElement(bz,{onMove:i,onMoveStart:j,onMoveEnd:k,onPaneContextMenu:f,elementsSelectable:u,zoomOnScroll:v,zoomOnPinch:w,panOnScroll:R,panOnScrollSpeed:y,panOnScrollMode:z,zoomOnDoubleClick:A,panOnDrag:!O&&Q,defaultViewport:C,translateExtent:D,minZoom:E,maxZoom:F,zoomActivationKeyCode:t,preventScrolling:G,noWheelClassName:I,noPanClassName:J},l.createElement(bJ,{onSelectionStart:p,onSelectionEnd:q,onPaneClick:b,onPaneMouseEnter:c,onPaneMouseMove:d,onPaneMouseLeave:e,onPaneContextMenu:f,onPaneScroll:g,panOnDrag:Q,isSelecting:!!S,selectionMode:o},a,N&&l.createElement(bW,{onSelectionContextMenu:H,noPanClassName:J,disableKeyboardA11y:K})))};bY.displayName="FlowRenderer";var bZ=(0,l.memo)(bY);function b$(a){let b={input:bU(a.input||aY),default:bU(a.default||aW),output:bU(a.output||a$),group:bU(a.group||a_)},c=Object.keys(a).filter(a=>!["input","default","output","group"].includes(a)).reduce((b,c)=>(b[c]=bU(a[c]||aW),b),{});return{...b,...c}}let b_=a=>({nodesDraggable:a.nodesDraggable,nodesConnectable:a.nodesConnectable,nodesFocusable:a.nodesFocusable,elementsSelectable:a.elementsSelectable,updateNodeDimensions:a.updateNodeDimensions,onError:a.onError}),b0=a=>{let{nodesDraggable:b,nodesConnectable:c,nodesFocusable:d,elementsSelectable:e,updateNodeDimensions:f,onError:g}=L(b_,u),h=function(a){return L((0,l.useCallback)(b=>a?aG(b.nodeInternals,{x:0,y:0,width:b.width,height:b.height},b.transform,!0):b.getNodes(),[a]))}(a.onlyRenderVisibleElements),j=(0,l.useRef)(),k=(0,l.useMemo)(()=>{if("undefined"==typeof ResizeObserver)return null;let a=new ResizeObserver(a=>{f(a.map(a=>({id:a.target.getAttribute("data-id"),nodeElement:a.target,forceUpdate:!0})))});return j.current=a,a},[]);return(0,l.useEffect)(()=>()=>{j?.current?.disconnect()},[]),l.createElement("div",{className:"react-flow__nodes",style:bt},h.map(f=>{let h=f.type||"default";a.nodeTypes[h]||(g?.("003",J.error003(h)),h="default");let j=a.nodeTypes[h]||a.nodeTypes.default,m=!!(f.draggable||b&&void 0===f.draggable),n=!!(f.selectable||e&&void 0===f.selectable),o=!!(f.connectable||c&&void 0===f.connectable),p=!!(f.focusable||d&&void 0===f.focusable),q=a.nodeExtent?T(f.positionAbsolute,a.nodeExtent):f.positionAbsolute,r=q?.x??0,s=q?.y??0,t=(({x:a,y:b,width:c,height:d,origin:e})=>!c||!d||e[0]<0||e[1]<0||e[0]>1||e[1]>1?{x:a,y:b}:{x:a-c*e[0],y:b-d*e[1]})({x:r,y:s,width:f.width??0,height:f.height??0,origin:a.nodeOrigin});return l.createElement(j,{key:f.id,id:f.id,className:f.className,style:f.style,type:h,data:f.data,sourcePosition:f.sourcePosition||i.Bottom,targetPosition:f.targetPosition||i.Top,hidden:f.hidden,xPos:r,yPos:s,xPosOrigin:t.x,yPosOrigin:t.y,selectNodesOnDrag:a.selectNodesOnDrag,onClick:a.onNodeClick,onMouseEnter:a.onNodeMouseEnter,onMouseMove:a.onNodeMouseMove,onMouseLeave:a.onNodeMouseLeave,onContextMenu:a.onNodeContextMenu,onDoubleClick:a.onNodeDoubleClick,selected:!!f.selected,isDraggable:m,isSelectable:n,isConnectable:o,isFocusable:p,resizeObserver:k,dragHandle:f.dragHandle,zIndex:f[ab]?.z??0,isParent:!!f[ab]?.isParent,noDragClassName:a.noDragClassName,noPanClassName:a.noPanClassName,initialized:!!f.width&&!!f.height,rfId:a.rfId,disableKeyboardA11y:a.disableKeyboardA11y,ariaLabel:f.ariaLabel,hasHandleBounds:!!f[ab]?.handleBounds})}))};b0.displayName="NodeRenderer";var b1=(0,l.memo)(b0);let b2="react-flow__edgeupdater",b3=({position:a,centerX:b,centerY:c,radius:d=10,onMouseDown:e,onMouseEnter:f,onMouseOut:g,type:h})=>l.createElement("circle",{onMouseDown:e,onMouseEnter:f,onMouseOut:g,className:m([b2,`${b2}-${h}`]),cx:((a,b,c)=>c===i.Left?a-b:c===i.Right?a+b:a)(b,d,a),cy:((a,b,c)=>c===i.Top?a-b:c===i.Bottom?a+b:a)(c,d,a),r:d,stroke:"transparent",fill:"transparent"}),b4=()=>!0;var b5=a=>{let b=({id:b,className:c,type:d,data:e,onClick:f,onEdgeDoubleClick:g,selected:h,animated:i,label:j,labelStyle:k,labelShowBg:n,labelBgStyle:o,labelBgPadding:p,labelBgBorderRadius:q,style:r,source:s,target:t,sourceX:u,sourceY:v,targetX:w,targetY:x,sourcePosition:y,targetPosition:z,elementsSelectable:A,hidden:B,sourceHandleId:C,targetHandleId:D,onContextMenu:E,onMouseEnter:F,onMouseMove:G,onMouseLeave:H,reconnectRadius:I,onReconnect:J,onReconnectStart:K,onReconnectEnd:L,markerEnd:N,markerStart:O,rfId:P,ariaLabel:Q,isFocusable:R,isReconnectable:S,pathOptions:T,interactionWidth:U,disableKeyboardA11y:V})=>{let W=(0,l.useRef)(null),[X,Y]=(0,l.useState)(!1),[Z,$]=(0,l.useState)(!1),_=M(),aa=(0,l.useMemo)(()=>`url('#${aB(O,P)}')`,[O,P]),ab=(0,l.useMemo)(()=>`url('#${aB(N,P)}')`,[N,P]);if(B)return null;let ad=ai(b,_.getState,g),ae=ai(b,_.getState,E),af=ai(b,_.getState,F),ag=ai(b,_.getState,G),ah=ai(b,_.getState,H),aj=(a,c)=>{if(0!==a.button)return;let{edges:d,isValidConnection:e}=_.getState(),f=c?t:s,g=(c?D:C)||null,h=c?"target":"source",i=d.find(a=>a.id===b);$(!0),K?.(a,i,h),aQ({event:a,handleId:g,nodeId:f,onConnect:a=>J?.(i,a),isTarget:c,getState:_.getState,setState:_.setState,isValidConnection:e||b4,edgeUpdaterType:h,onReconnectEnd:a=>{$(!1),L?.(a,i,h)}})},ak=()=>Y(!0),al=()=>Y(!1);return l.createElement("g",{className:m(["react-flow__edge",`react-flow__edge-${d}`,c,{selected:h,animated:i,inactive:!A&&!f,updating:X}]),onClick:a=>{let{edges:c,addSelectedEdges:d,unselectNodesAndEdges:e,multiSelectionActive:g}=_.getState(),h=c.find(a=>a.id===b);h&&(A&&(_.setState({nodesSelectionActive:!1}),h.selected&&g?(e({nodes:[],edges:[h]}),W.current?.blur()):d([b])),f&&f(a,h))},onDoubleClick:ad,onContextMenu:ae,onMouseEnter:af,onMouseMove:ag,onMouseLeave:ah,onKeyDown:R?a=>{if(!V&&ac.includes(a.key)&&A){let{unselectNodesAndEdges:c,addSelectedEdges:d,edges:e}=_.getState();"Escape"===a.key?(W.current?.blur(),c({edges:[e.find(a=>a.id===b)]})):d([b])}}:void 0,tabIndex:R?0:void 0,role:R?"button":"img","data-testid":`rf__edge-${b}`,"aria-label":null===Q?void 0:Q||`Edge from ${s} to ${t}`,"aria-describedby":R?`${bd}-${P}`:void 0,ref:W},!Z&&l.createElement(a,{id:b,source:s,target:t,selected:h,animated:i,label:j,labelStyle:k,labelShowBg:n,labelBgStyle:o,labelBgPadding:p,labelBgBorderRadius:q,data:e,style:r,sourceX:u,sourceY:v,targetX:w,targetY:x,sourcePosition:y,targetPosition:z,sourceHandleId:C,targetHandleId:D,markerStart:aa,markerEnd:ab,pathOptions:T,interactionWidth:U}),S&&l.createElement(l.Fragment,null,("source"===S||!0===S)&&l.createElement(b3,{position:y,centerX:u,centerY:v,radius:I,onMouseDown:a=>aj(a,!0),onMouseEnter:ak,onMouseOut:al,type:"source"}),("target"===S||!0===S)&&l.createElement(b3,{position:z,centerX:w,centerY:x,radius:I,onMouseDown:a=>aj(a,!1),onMouseEnter:ak,onMouseOut:al,type:"target"})))};return b.displayName="EdgeWrapper",(0,l.memo)(b)};function b6(a){let b={default:b5(a.default||ay),straight:b5(a.bezier||au),step:b5(a.step||at),smoothstep:b5(a.step||as),simplebezier:b5(a.simplebezier||an)},c=Object.keys(a).filter(a=>!["default","bezier"].includes(a)).reduce((b,c)=>(b[c]=b5(a[c]||ay),b),{});return{...b,...c}}function b7(a,b,c=null){let d=(c?.x||0)+b.x,e=(c?.y||0)+b.y,f=c?.width||b.width,g=c?.height||b.height;switch(a){case i.Top:return{x:d+f/2,y:e};case i.Right:return{x:d+f,y:e+g/2};case i.Bottom:return{x:d+f/2,y:e+g};case i.Left:return{x:d,y:e+g/2}}}function b8(a,b){return a?1!==a.length&&b?b&&a.find(a=>a.id===b)||null:a[0]:null}function b9(a){let b=a?.[ab]?.handleBounds||null,c=b&&a?.width&&a?.height&&void 0!==a?.positionAbsolute?.x&&void 0!==a?.positionAbsolute?.y;return[{x:a?.positionAbsolute?.x||0,y:a?.positionAbsolute?.y||0,width:a?.width||0,height:a?.height||0},b,!!c]}let ca=[{level:0,isMaxLevel:!0,edges:[]}],cb={[h.Arrow]:({color:a="none",strokeWidth:b=1})=>l.createElement("polyline",{style:{stroke:a,strokeWidth:b},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[h.ArrowClosed]:({color:a="none",strokeWidth:b=1})=>l.createElement("polyline",{style:{stroke:a,fill:a,strokeWidth:b},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},cc=({id:a,type:b,color:c,width:d=12.5,height:e=12.5,markerUnits:f="strokeWidth",strokeWidth:g,orient:h="auto-start-reverse"})=>{let i=function(a){let b=M();return(0,l.useMemo)(()=>Object.prototype.hasOwnProperty.call(cb,a)?cb[a]:(b.getState().onError?.("009",J.error009(a)),null),[a])}(b);return i?l.createElement("marker",{className:"react-flow__arrowhead",id:a,markerWidth:`${d}`,markerHeight:`${e}`,viewBox:"-10 -10 20 20",markerUnits:f,orient:h,refX:"0",refY:"0"},l.createElement(i,{color:c,strokeWidth:g})):null},cd=({defaultColor:a,rfId:b})=>{let c=L((0,l.useCallback)((({defaultColor:a,rfId:b})=>c=>{let d=[];return c.edges.reduce((c,e)=>([e.markerStart,e.markerEnd].forEach(e=>{if(e&&"object"==typeof e){let f=aB(e,b);d.includes(f)||(c.push({id:f,color:e.color||a,...e}),d.push(f))}}),c),[]).sort((a,b)=>a.id.localeCompare(b.id))})({defaultColor:a,rfId:b}),[a,b]),(a,b)=>!(a.length!==b.length||a.some((a,c)=>a.id!==b[c].id)));return l.createElement("defs",null,c.map(a=>l.createElement(cc,{id:a.id,key:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient})))};cd.displayName="MarkerDefinitions";var ce=(0,l.memo)(cd);let cf=a=>({nodesConnectable:a.nodesConnectable,edgesFocusable:a.edgesFocusable,edgesUpdatable:a.edgesUpdatable,elementsSelectable:a.elementsSelectable,width:a.width,height:a.height,connectionMode:a.connectionMode,nodeInternals:a.nodeInternals,onError:a.onError}),cg=({defaultMarkerColor:a,onlyRenderVisibleElements:b,elevateEdgesOnSelect:c,rfId:e,edgeTypes:f,noPanClassName:g,onEdgeContextMenu:h,onEdgeMouseEnter:j,onEdgeMouseMove:k,onEdgeMouseLeave:n,onEdgeClick:o,onEdgeDoubleClick:p,onReconnect:q,onReconnectStart:r,onReconnectEnd:s,reconnectRadius:t,children:v,disableKeyboardA11y:w})=>{let{edgesFocusable:x,edgesUpdatable:y,elementsSelectable:z,width:A,height:B,connectionMode:C,nodeInternals:D,onError:E}=L(cf,u),F=function(a,b,c){return function(a,b,c=!1){let d=-1,e=Object.entries(a.reduce((a,e)=>{let f=aa(e.zIndex),g=f?e.zIndex:0;if(c){let a=b.get(e.target),c=b.get(e.source),d=e.selected||a?.selected||c?.selected,h=Math.max(c?.[ab]?.z||0,a?.[ab]?.z||0,1e3);g=(f?e.zIndex:0)+(d?h:0)}return a[g]?a[g].push(e):a[g]=[e],d=g>d?g:d,a},{})).map(([a,b])=>{let c=+a;return{edges:b,level:c,isMaxLevel:c===d}});return 0===e.length?ca:e}(L((0,l.useCallback)(c=>a?c.edges.filter(a=>{let d=b.get(a.source),e=b.get(a.target);return d?.width&&d?.height&&e?.width&&e?.height&&function({sourcePos:a,targetPos:b,sourceWidth:c,sourceHeight:d,targetWidth:e,targetHeight:f,width:g,height:h,transform:i}){let j={x:Math.min(a.x,b.x),y:Math.min(a.y,b.y),x2:Math.max(a.x+c,b.x+e),y2:Math.max(a.y+d,b.y+f)};j.x===j.x2&&(j.x2+=1),j.y===j.y2&&(j.y2+=1);let k=Y({x:(0-i[0])/i[2],y:(0-i[1])/i[2],width:g/i[2],height:h/i[2]});return Math.ceil(Math.max(0,Math.min(k.x2,j.x2)-Math.max(k.x,j.x))*Math.max(0,Math.min(k.y2,j.y2)-Math.max(k.y,j.y)))>0}({sourcePos:d.positionAbsolute||{x:0,y:0},targetPos:e.positionAbsolute||{x:0,y:0},sourceWidth:d.width,sourceHeight:d.height,targetWidth:e.width,targetHeight:e.height,width:c.width,height:c.height,transform:c.transform})}):c.edges,[a,b])),b,c)}(b,D,c);return A?l.createElement(l.Fragment,null,F.map(({level:b,edges:c,isMaxLevel:u})=>l.createElement("svg",{key:b,style:{zIndex:b},width:A,height:B,className:"react-flow__edges react-flow__container"},u&&l.createElement(ce,{defaultColor:a,rfId:e}),l.createElement("g",null,c.map(a=>{let[b,c,u]=b9(D.get(a.source)),[v,A,B]=b9(D.get(a.target));if(!u||!B)return null;let F=a.type||"default";f[F]||(E?.("011",J.error011(F)),F="default");let G=f[F]||f.default,H=C===d.Strict?A.target:(A.target??[]).concat(A.source??[]),I=b8(c.source,a.sourceHandle),K=b8(H,a.targetHandle),L=I?.position||i.Bottom,M=K?.position||i.Top,N=!!(a.focusable||x&&void 0===a.focusable),O=a.reconnectable||a.updatable;if(!I||!K)return E?.("008",J.error008(I,a)),null;let{sourceX:P,sourceY:Q,targetX:R,targetY:S}=((a,b,c,d,e,f)=>{let g=b7(c,a,b),h=b7(f,d,e);return{sourceX:g.x,sourceY:g.y,targetX:h.x,targetY:h.y}})(b,I,L,v,K,M);return l.createElement(G,{key:a.id,id:a.id,className:m([a.className,g]),type:F,data:a.data,selected:!!a.selected,animated:!!a.animated,hidden:!!a.hidden,label:a.label,labelStyle:a.labelStyle,labelShowBg:a.labelShowBg,labelBgStyle:a.labelBgStyle,labelBgPadding:a.labelBgPadding,labelBgBorderRadius:a.labelBgBorderRadius,style:a.style,source:a.source,target:a.target,sourceHandleId:a.sourceHandle,targetHandleId:a.targetHandle,markerEnd:a.markerEnd,markerStart:a.markerStart,sourceX:P,sourceY:Q,targetX:R,targetY:S,sourcePosition:L,targetPosition:M,elementsSelectable:z,onContextMenu:h,onMouseEnter:j,onMouseMove:k,onMouseLeave:n,onClick:o,onEdgeDoubleClick:p,onReconnect:q,onReconnectStart:r,onReconnectEnd:s,reconnectRadius:t,rfId:e,ariaLabel:a.ariaLabel,isFocusable:N,isReconnectable:void 0!==q&&(O||y&&void 0===O),pathOptions:"pathOptions"in a?a.pathOptions:void 0,interactionWidth:a.interactionWidth,disableKeyboardA11y:w})})))),v):null};cg.displayName="EdgeRenderer";var ch=(0,l.memo)(cg);let ci=a=>`translate(${a.transform[0]}px,${a.transform[1]}px) scale(${a.transform[2]})`;function cj({children:a}){let b=L(ci);return l.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:b}},a)}let ck={[i.Left]:i.Right,[i.Right]:i.Left,[i.Top]:i.Bottom,[i.Bottom]:i.Top},cl=({nodeId:a,handleType:b,style:c,type:e=g.Bezier,CustomComponent:f,connectionStatus:h})=>{let{fromNode:i,handleId:j,toX:k,toY:m,connectionMode:n}=L((0,l.useCallback)(b=>({fromNode:b.nodeInternals.get(a),handleId:b.connectionHandleId,toX:(b.connectionPosition.x-b.transform[0])/b.transform[2],toY:(b.connectionPosition.y-b.transform[1])/b.transform[2],connectionMode:b.connectionMode}),[a]),u),o=i?.[ab]?.handleBounds,p=o?.[b];if(n===d.Loose&&(p=p||o?.["source"===b?"target":"source"]),!i||!p)return null;let q=j?p.find(a=>a.id===j):p[0],r=q?q.x+q.width/2:(i.width??0)/2,s=q?q.y+q.height/2:i.height??0,t=(i.positionAbsolute?.x??0)+r,v=(i.positionAbsolute?.y??0)+s,w=q?.position,x=w?ck[w]:null;if(!w||!x)return null;if(f)return l.createElement(f,{connectionLineType:e,connectionLineStyle:c,fromNode:i,fromHandle:q,fromX:t,fromY:v,toX:k,toY:m,fromPosition:w,toPosition:x,connectionStatus:h});let y="",z={sourceX:t,sourceY:v,sourcePosition:w,targetX:k,targetY:m,targetPosition:x};return e===g.Bezier?[y]=ax(z):e===g.Step?[y]=ar({...z,borderRadius:0}):e===g.SmoothStep?[y]=ar(z):e===g.SimpleBezier?[y]=am(z):y=`M${t},${v} ${k},${m}`,l.createElement("path",{d:y,fill:"none",className:"react-flow__connection-path",style:c})};cl.displayName="ConnectionLine";let cm=a=>({nodeId:a.connectionNodeId,handleType:a.connectionHandleType,nodesConnectable:a.nodesConnectable,connectionStatus:a.connectionStatus,width:a.width,height:a.height});function cn({containerStyle:a,style:b,type:c,component:d}){let{nodeId:e,handleType:f,nodesConnectable:g,width:h,height:i,connectionStatus:j}=L(cm,u);return e&&f&&h&&g?l.createElement("svg",{style:a,width:h,height:i,className:"react-flow__edges react-flow__connectionline react-flow__container"},l.createElement("g",{className:m(["react-flow__connection",j])},l.createElement(cl,{nodeId:e,handleType:f,style:b,type:c,CustomComponent:d,connectionStatus:j}))):null}function co(a,b){return(0,l.useRef)(null),M(),(0,l.useMemo)(()=>b(a),[a])}let cp=({nodeTypes:a,edgeTypes:b,onMove:c,onMoveStart:d,onMoveEnd:e,onInit:f,onNodeClick:g,onEdgeClick:h,onNodeDoubleClick:i,onEdgeDoubleClick:j,onNodeMouseEnter:k,onNodeMouseMove:m,onNodeMouseLeave:n,onNodeContextMenu:o,onSelectionContextMenu:p,onSelectionStart:q,onSelectionEnd:r,connectionLineType:s,connectionLineStyle:t,connectionLineComponent:u,connectionLineContainerStyle:v,selectionKeyCode:w,selectionOnDrag:x,selectionMode:y,multiSelectionKeyCode:z,panActivationKeyCode:A,zoomActivationKeyCode:B,deleteKeyCode:C,onlyRenderVisibleElements:D,elementsSelectable:E,selectNodesOnDrag:F,defaultViewport:G,translateExtent:H,minZoom:I,maxZoom:J,preventScrolling:K,defaultMarkerColor:L,zoomOnScroll:M,zoomOnPinch:N,panOnScroll:O,panOnScrollSpeed:P,panOnScrollMode:Q,zoomOnDoubleClick:R,panOnDrag:S,onPaneClick:T,onPaneMouseEnter:U,onPaneMouseMove:V,onPaneMouseLeave:W,onPaneScroll:X,onPaneContextMenu:Y,onEdgeContextMenu:Z,onEdgeMouseEnter:$,onEdgeMouseMove:_,onEdgeMouseLeave:aa,onReconnect:ab,onReconnectStart:ac,onReconnectEnd:ad,reconnectRadius:ae,noDragClassName:af,noWheelClassName:ag,noPanClassName:ah,elevateEdgesOnSelect:ai,disableKeyboardA11y:aj,nodeOrigin:ak,nodeExtent:al,rfId:am})=>{let an=co(a,b$),ao=co(b,b6);return!function(a){let b=br(),c=(0,l.useRef)(!1);(0,l.useEffect)(()=>{!c.current&&b.viewportInitialized&&a&&(setTimeout(()=>a(b),1),c.current=!0)},[a,b.viewportInitialized])}(f),l.createElement(bZ,{onPaneClick:T,onPaneMouseEnter:U,onPaneMouseMove:V,onPaneMouseLeave:W,onPaneContextMenu:Y,onPaneScroll:X,deleteKeyCode:C,selectionKeyCode:w,selectionOnDrag:x,selectionMode:y,onSelectionStart:q,onSelectionEnd:r,multiSelectionKeyCode:z,panActivationKeyCode:A,zoomActivationKeyCode:B,elementsSelectable:E,onMove:c,onMoveStart:d,onMoveEnd:e,zoomOnScroll:M,zoomOnPinch:N,zoomOnDoubleClick:R,panOnScroll:O,panOnScrollSpeed:P,panOnScrollMode:Q,panOnDrag:S,defaultViewport:G,translateExtent:H,minZoom:I,maxZoom:J,onSelectionContextMenu:p,preventScrolling:K,noDragClassName:af,noWheelClassName:ag,noPanClassName:ah,disableKeyboardA11y:aj},l.createElement(cj,null,l.createElement(ch,{edgeTypes:ao,onEdgeClick:h,onEdgeDoubleClick:j,onlyRenderVisibleElements:D,onEdgeContextMenu:Z,onEdgeMouseEnter:$,onEdgeMouseMove:_,onEdgeMouseLeave:aa,onReconnect:ab,onReconnectStart:ac,onReconnectEnd:ad,reconnectRadius:ae,defaultMarkerColor:L,noPanClassName:ah,elevateEdgesOnSelect:!!ai,disableKeyboardA11y:aj,rfId:am},l.createElement(cn,{style:t,type:s,component:u,containerStyle:v})),l.createElement("div",{className:"react-flow__edgelabel-renderer"}),l.createElement(b1,{nodeTypes:an,onNodeClick:g,onNodeDoubleClick:i,onNodeMouseEnter:k,onNodeMouseMove:m,onNodeMouseLeave:n,onNodeContextMenu:o,selectNodesOnDrag:F,onlyRenderVisibleElements:D,noPanClassName:ah,noDragClassName:af,disableKeyboardA11y:aj,nodeOrigin:ak,nodeExtent:al,rfId:am})))};cp.displayName="GraphView";var cq=(0,l.memo)(cp);let cr=[[-1/0,-1/0],[1/0,1/0]],cs={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:cr,nodeExtent:cr,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:d.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:ad,isValidConnection:void 0},ct=({children:a})=>{let b=(0,l.useRef)(null);return b.current||(b.current=((a,b)=>a?t(a,b):t)((a,b)=>({...cs,setNodes:c=>{let{nodeInternals:d,nodeOrigin:e,elevateNodesOnSelect:f}=b();a({nodeInternals:bl(c,d,e,f)})},getNodes:()=>Array.from(b().nodeInternals.values()),setEdges:c=>{let{defaultEdgeOptions:d={}}=b();a({edges:c.map(a=>({...d,...a}))})},setDefaultNodesAndEdges:(c,d)=>{let e=void 0!==c,f=void 0!==d;a({nodeInternals:e?bl(c,new Map,b().nodeOrigin,b().elevateNodesOnSelect):new Map,edges:f?d:[],hasDefaultNodes:e,hasDefaultEdges:f})},updateNodeDimensions:c=>{let{onNodesChange:d,nodeInternals:e,fitViewOnInit:f,fitViewOnInitDone:g,fitViewOnInitOptions:h,domNode:i,nodeOrigin:j}=b(),k=i?.querySelector(".react-flow__viewport");if(!k)return;let l=window.getComputedStyle(k),{m22:m}=new window.DOMMatrixReadOnly(l.transform),n=c.reduce((a,b)=>{let c=e.get(b.id);if(c?.hidden)e.set(c.id,{...c,[ab]:{...c[ab],handleBounds:void 0}});else if(c){let d=R(b.nodeElement);d.width&&d.height&&(c.width!==d.width||c.height!==d.height||b.forceUpdate)&&(e.set(c.id,{...c,[ab]:{...c[ab],handleBounds:{source:bN(".source",b.nodeElement,m,j),target:bN(".target",b.nodeElement,m,j)}},...d}),a.push({id:c.id,type:"dimensions",dimensions:d}))}return a},[]);bk(e,j);let o=g||f&&!g&&bm(b,{initial:!0,...h});a({nodeInternals:new Map(e),fitViewOnInitDone:o}),n?.length>0&&d?.(n)},updateNodePositions:(a,c=!0,d=!1)=>{let{triggerNodeChanges:e}=b();e(a.map(a=>{let b={id:a.id,type:"position",dragging:d};return c&&(b.positionAbsolute=a.positionAbsolute,b.position=a.position),b}))},triggerNodeChanges:c=>{let{onNodesChange:d,nodeInternals:e,hasDefaultNodes:f,nodeOrigin:g,getNodes:h,elevateNodesOnSelect:i}=b();c?.length&&(f&&a({nodeInternals:bl(bE(c,h()),e,g,i)}),d?.(c))},addSelectedNodes:c=>{let d,{multiSelectionActive:e,edges:f,getNodes:g}=b(),h=null;e?d=c.map(a=>bF(a,!0)):(d=bG(g(),c),h=bG(f,[])),bn({changedNodes:d,changedEdges:h,get:b,set:a})},addSelectedEdges:c=>{let d,{multiSelectionActive:e,edges:f,getNodes:g}=b(),h=null;e?d=c.map(a=>bF(a,!0)):(d=bG(f,c),h=bG(g(),[])),bn({changedNodes:h,changedEdges:d,get:b,set:a})},unselectNodesAndEdges:({nodes:c,edges:d}={})=>{let{edges:e,getNodes:f}=b();bn({changedNodes:(c||f()).map(a=>(a.selected=!1,bF(a.id,!1))),changedEdges:(d||e).map(a=>bF(a.id,!1)),get:b,set:a})},setMinZoom:c=>{let{d3Zoom:d,maxZoom:e}=b();d?.scaleExtent([c,e]),a({minZoom:c})},setMaxZoom:c=>{let{d3Zoom:d,minZoom:e}=b();d?.scaleExtent([e,c]),a({maxZoom:c})},setTranslateExtent:c=>{b().d3Zoom?.translateExtent(c),a({translateExtent:c})},resetSelectedElements:()=>{let{edges:c,getNodes:d}=b();bn({changedNodes:d().filter(a=>a.selected).map(a=>bF(a.id,!1)),changedEdges:c.filter(a=>a.selected).map(a=>bF(a.id,!1)),get:b,set:a})},setNodeExtent:c=>{let{nodeInternals:d}=b();d.forEach(a=>{a.positionAbsolute=T(a.position,c)}),a({nodeExtent:c,nodeInternals:new Map(d)})},panBy:a=>{let{transform:c,width:d,height:e,d3Zoom:f,d3Selection:g,translateExtent:h}=b();if(!f||!g||!a.x&&!a.y)return!1;let i=v.GS.translate(c[0]+a.x,c[1]+a.y).scale(c[2]),j=f?.constrain()(i,[[0,0],[d,e]],h);return f.transform(g,j),c[0]!==j.x||c[1]!==j.y||c[2]!==j.k},cancelConnection:()=>a({connectionNodeId:cs.connectionNodeId,connectionHandleId:cs.connectionHandleId,connectionHandleType:cs.connectionHandleType,connectionStatus:cs.connectionStatus,connectionStartHandle:cs.connectionStartHandle,connectionEndHandle:cs.connectionEndHandle}),reset:()=>a({...cs})}),Object.is)),l.createElement(I,{value:b.current},a)};ct.displayName="ReactFlowProvider";let cu=({children:a})=>(0,l.useContext)(H)?l.createElement(l.Fragment,null,a):l.createElement(ct,null,a);cu.displayName="ReactFlowWrapper";let cv={input:aY,default:aW,output:a$,group:a_},cw={default:ay,straight:au,step:at,smoothstep:as,simplebezier:an},cx=[0,0],cy=[15,15],cz={x:0,y:0,zoom:1},cA={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},cB=(0,l.forwardRef)(({nodes:a,edges:b,defaultNodes:c,defaultEdges:h,className:i,nodeTypes:j=cv,edgeTypes:k=cw,onNodeClick:n,onEdgeClick:o,onInit:p,onMove:q,onMoveStart:r,onMoveEnd:s,onConnect:t,onConnectStart:u,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:x,onNodeMouseEnter:y,onNodeMouseMove:z,onNodeMouseLeave:A,onNodeContextMenu:B,onNodeDoubleClick:C,onNodeDragStart:D,onNodeDrag:E,onNodeDragStop:F,onNodesDelete:G,onEdgesDelete:H,onSelectionChange:I,onSelectionDragStart:J,onSelectionDrag:K,onSelectionDragStop:L,onSelectionContextMenu:M,onSelectionStart:N,onSelectionEnd:O,connectionMode:Q=d.Strict,connectionLineType:R=g.Bezier,connectionLineStyle:S,connectionLineComponent:T,connectionLineContainerStyle:U,deleteKeyCode:V="Backspace",selectionKeyCode:W="Shift",selectionOnDrag:X=!1,selectionMode:Y=f.Full,panActivationKeyCode:Z="Space",multiSelectionKeyCode:$=ag()?"Meta":"Control",zoomActivationKeyCode:_=ag()?"Meta":"Control",snapToGrid:aa=!1,snapGrid:ab=cy,onlyRenderVisibleElements:ac=!1,selectNodesOnDrag:ad=!0,nodesDraggable:ae,nodesConnectable:af,nodesFocusable:ah,nodeOrigin:ai=cx,edgesFocusable:aj,edgesUpdatable:ak,elementsSelectable:al,defaultViewport:am=cz,minZoom:an=.5,maxZoom:ao=2,translateExtent:ap=cr,preventScrolling:aq=!0,nodeExtent:ar,defaultMarkerColor:as="#b1b1b7",zoomOnScroll:at=!0,zoomOnPinch:au=!0,panOnScroll:av=!1,panOnScrollSpeed:aw=.5,panOnScrollMode:ax=e.Free,zoomOnDoubleClick:ay=!0,panOnDrag:az=!0,onPaneClick:aA,onPaneMouseEnter:aB,onPaneMouseMove:aC,onPaneMouseLeave:aD,onPaneScroll:aE,onPaneContextMenu:aF,children:aG,onEdgeContextMenu:aH,onEdgeDoubleClick:aI,onEdgeMouseEnter:aJ,onEdgeMouseMove:aK,onEdgeMouseLeave:aL,onEdgeUpdate:aM,onEdgeUpdateStart:aN,onEdgeUpdateEnd:aO,onReconnect:aP,onReconnectStart:aQ,onReconnectEnd:aR,reconnectRadius:aS=10,edgeUpdaterRadius:aT=10,onNodesChange:aU,onEdgesChange:aV,noDragClassName:aW="nodrag",noWheelClassName:aX="nowheel",noPanClassName:aY="nopan",fitView:aZ=!1,fitViewOptions:a$,connectOnClick:a_=!0,attributionPosition:a0,proOptions:a1,defaultEdgeOptions:a2,elevateNodesOnSelect:a3=!0,elevateEdgesOnSelect:a4=!1,disableKeyboardA11y:a6=!1,autoPanOnConnect:a7=!0,autoPanOnNodeDrag:a8=!0,connectionRadius:ba=20,isValidConnection:bb,onError:bc,style:bd,id:be,nodeDragThreshold:bf,...bh},bi)=>{let bj=be||"1";return l.createElement("div",{...bh,style:{...bd,...cA},ref:bi,className:m(["react-flow",i]),"data-testid":"rf__wrapper",id:be},l.createElement(cu,null,l.createElement(cq,{onInit:p,onMove:q,onMoveStart:r,onMoveEnd:s,onNodeClick:n,onEdgeClick:o,onNodeMouseEnter:y,onNodeMouseMove:z,onNodeMouseLeave:A,onNodeContextMenu:B,onNodeDoubleClick:C,nodeTypes:j,edgeTypes:k,connectionLineType:R,connectionLineStyle:S,connectionLineComponent:T,connectionLineContainerStyle:U,selectionKeyCode:W,selectionOnDrag:X,selectionMode:Y,deleteKeyCode:V,multiSelectionKeyCode:$,panActivationKeyCode:Z,zoomActivationKeyCode:_,onlyRenderVisibleElements:ac,selectNodesOnDrag:ad,defaultViewport:am,translateExtent:ap,minZoom:an,maxZoom:ao,preventScrolling:aq,zoomOnScroll:at,zoomOnPinch:au,zoomOnDoubleClick:ay,panOnScroll:av,panOnScrollSpeed:aw,panOnScrollMode:ax,panOnDrag:az,onPaneClick:aA,onPaneMouseEnter:aB,onPaneMouseMove:aC,onPaneMouseLeave:aD,onPaneScroll:aE,onPaneContextMenu:aF,onSelectionContextMenu:M,onSelectionStart:N,onSelectionEnd:O,onEdgeContextMenu:aH,onEdgeDoubleClick:aI,onEdgeMouseEnter:aJ,onEdgeMouseMove:aK,onEdgeMouseLeave:aL,onReconnect:aP??aM,onReconnectStart:aQ??aN,onReconnectEnd:aR??aO,reconnectRadius:aS??aT,defaultMarkerColor:as,noDragClassName:aW,noWheelClassName:aX,noPanClassName:aY,elevateEdgesOnSelect:a4,rfId:bj,disableKeyboardA11y:a6,nodeOrigin:ai,nodeExtent:ar}),l.createElement(a9,{nodes:a,edges:b,defaultNodes:c,defaultEdges:h,onConnect:t,onConnectStart:u,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:x,nodesDraggable:ae,nodesConnectable:af,nodesFocusable:ah,edgesFocusable:aj,edgesUpdatable:ak,elementsSelectable:al,elevateNodesOnSelect:a3,minZoom:an,maxZoom:ao,nodeExtent:ar,onNodesChange:aU,onEdgesChange:aV,snapToGrid:aa,snapGrid:ab,connectionMode:Q,translateExtent:ap,connectOnClick:a_,defaultEdgeOptions:a2,fitView:aZ,fitViewOptions:a$,onNodesDelete:G,onEdgesDelete:H,onNodeDragStart:D,onNodeDrag:E,onNodeDragStop:F,onSelectionDrag:K,onSelectionDragStart:J,onSelectionDragStop:L,noPanClassName:aY,nodeOrigin:ai,rfId:bj,autoPanOnConnect:a7,autoPanOnNodeDrag:a8,onError:bc,connectionRadius:ba,isValidConnection:bb,nodeDragThreshold:bf}),l.createElement(a5,{onSelectionChange:I}),aG,l.createElement(P,{proOptions:a1,position:a0}),l.createElement(bg,{rfId:bj,disableKeyboardA11y:a6})))});function cC(a){return b=>{let[c,d]=(0,l.useState)(b),e=(0,l.useCallback)(b=>d(c=>a(b,c)),[]);return[c,d,e]}}cB.displayName="ReactFlow";let cD=cC(bE),cE=cC(function(a,b){return bD(a,b)});function cF({color:a,dimensions:b,lineWidth:c}){return l.createElement("path",{stroke:a,strokeWidth:c,d:`M${b[0]/2} 0 V${b[1]} M0 ${b[1]/2} H${b[0]}`})}function cG({color:a,radius:b}){return l.createElement("circle",{cx:b,cy:b,r:b,fill:a})}!function(a){a.Lines="lines",a.Dots="dots",a.Cross="cross"}(j||(j={}));let cH={[j.Dots]:"#91919a",[j.Lines]:"#eee",[j.Cross]:"#e2e2e2"},cI={[j.Dots]:1,[j.Lines]:1,[j.Cross]:6},cJ=a=>({transform:a.transform,patternId:`pattern-${a.rfId}`});function cK({id:a,variant:b=j.Dots,gap:c=20,size:d,lineWidth:e=1,offset:f=2,color:g,style:h,className:i}){let k=(0,l.useRef)(null),{transform:n,patternId:o}=L(cJ,u),p=g||cH[b],q=d||cI[b],r=b===j.Dots,s=b===j.Cross,t=Array.isArray(c)?c:[c,c],v=[t[0]*n[2]||1,t[1]*n[2]||1],w=q*n[2],x=s?[w,w]:v,y=r?[w/f,w/f]:[x[0]/f,x[1]/f];return l.createElement("svg",{className:m(["react-flow__background",i]),style:{...h,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:k,"data-testid":"rf__background"},l.createElement("pattern",{id:o+a,x:n[0]%v[0],y:n[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${y[0]},-${y[1]})`},r?l.createElement(cG,{color:p,radius:w/f}):l.createElement(cF,{dimensions:x,color:p,lineWidth:e})),l.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${o+a})`}))}cK.displayName="Background";var cL=(0,l.memo)(cK);function cM(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},l.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function cN(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},l.createElement("path",{d:"M0 0h32v4.2H0z"}))}function cO(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},l.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function cP(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},l.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function cQ(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},l.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}let cR=({children:a,className:b,...c})=>l.createElement("button",{type:"button",className:m(["react-flow__controls-button",b]),...c},a);cR.displayName="ControlButton";let cS=a=>({isInteractive:a.nodesDraggable||a.nodesConnectable||a.elementsSelectable,minZoomReached:a.transform[2]<=a.minZoom,maxZoomReached:a.transform[2]>=a.maxZoom}),cT=({style:a,showZoom:b=!0,showFitView:c=!0,showInteractive:d=!0,fitViewOptions:e,onZoomIn:f,onZoomOut:g,onFitView:h,onInteractiveChange:i,className:j,children:k,position:n="bottom-left"})=>{let o=M(),[p,q]=(0,l.useState)(!1),{isInteractive:r,minZoomReached:s,maxZoomReached:t}=L(cS,u),{zoomIn:v,zoomOut:w,fitView:x}=br();return((0,l.useEffect)(()=>{q(!0)},[]),p)?l.createElement(O,{className:m(["react-flow__controls",j]),position:n,style:a,"data-testid":"rf__controls"},b&&l.createElement(l.Fragment,null,l.createElement(cR,{onClick:()=>{v(),f?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:t},l.createElement(cM,null)),l.createElement(cR,{onClick:()=>{w(),g?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:s},l.createElement(cN,null))),c&&l.createElement(cR,{className:"react-flow__controls-fitview",onClick:()=>{x(e),h?.()},title:"fit view","aria-label":"fit view"},l.createElement(cO,null)),d&&l.createElement(cR,{className:"react-flow__controls-interactive",onClick:()=>{o.setState({nodesDraggable:!r,nodesConnectable:!r,elementsSelectable:!r}),i?.(!r)},title:"toggle interactivity","aria-label":"toggle interactivity"},r?l.createElement(cQ,null):l.createElement(cP,null)),k):null};cT.displayName="Controls";var cU=(0,l.memo)(cT);let cV=({id:a,x:b,y:c,width:d,height:e,style:f,color:g,strokeColor:h,strokeWidth:i,className:j,borderRadius:k,shapeRendering:n,onClick:o,selected:p})=>{let{background:q,backgroundColor:r}=f||{};return l.createElement("rect",{className:m(["react-flow__minimap-node",{selected:p},j]),x:b,y:c,rx:k,ry:k,width:d,height:e,fill:g||q||r,stroke:h,strokeWidth:i,shapeRendering:n,onClick:o?b=>o(b,a):void 0})};cV.displayName="MiniMapNode";var cW=(0,l.memo)(cV);let cX=a=>a.nodeOrigin,cY=a=>a.getNodes().filter(a=>!a.hidden&&a.width&&a.height),cZ=a=>a instanceof Function?a:()=>a;var c$=(0,l.memo)(function({nodeStrokeColor:a="transparent",nodeColor:b="#e2e2e2",nodeClassName:c="",nodeBorderRadius:d=5,nodeStrokeWidth:e=2,nodeComponent:f=cW,onClick:g}){let h=L(cY,u),i=L(cX),j=cZ(b),k=cZ(a),m=cZ(c),n="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return l.createElement(l.Fragment,null,h.map(a=>{let{x:b,y:c}=aE(a,i).positionAbsolute;return l.createElement(f,{key:a.id,x:b,y:c,width:a.width,height:a.height,style:a.style,selected:a.selected,className:m(a),color:j(a),borderRadius:d,strokeColor:k(a),strokeWidth:e,shapeRendering:n,onClick:g,id:a.id})}))});let c_=a=>{let b,c=a.getNodes(),d={x:-a.transform[0]/a.transform[2],y:-a.transform[1]/a.transform[2],width:a.width/a.transform[2],height:a.height/a.transform[2]};return{viewBB:d,boundingRect:c.length>0?(b=aF(c,a.nodeOrigin),Z(X(Y(b),Y(d)))):d,rfId:a.rfId}};function c0({style:a,className:b,nodeStrokeColor:c="transparent",nodeColor:d="#e2e2e2",nodeClassName:e="",nodeBorderRadius:f=5,nodeStrokeWidth:g=2,nodeComponent:h,maskColor:i="rgb(240, 240, 240, 0.6)",maskStrokeColor:j="none",maskStrokeWidth:k=1,position:n="bottom-right",onClick:o,onNodeClick:p,pannable:q=!1,zoomable:r=!1,ariaLabel:s="React Flow mini map",inversePan:t=!1,zoomStep:y=10,offsetScale:z=5}){let A=M(),B=(0,l.useRef)(null),{boundingRect:C,viewBB:D,rfId:E}=L(c_,u),F=a?.width??200,G=a?.height??150,H=Math.max(C.width/F,C.height/G),I=H*F,J=H*G,K=z*H,N=C.x-(I-C.width)/2-K,P=C.y-(J-C.height)/2-K,Q=I+2*K,R=J+2*K,S=`react-flow__minimap-desc-${E}`,T=(0,l.useRef)(0);T.current=H,(0,l.useEffect)(()=>{if(B.current){let a=(0,w.A)(B.current),b=(0,v.s_)().on("zoom",q?a=>{let{transform:b,d3Selection:c,d3Zoom:d,translateExtent:e,width:f,height:g}=A.getState();if("mousemove"!==a.sourceEvent.type||!c||!d)return;let h=T.current*Math.max(1,b[2])*(t?-1:1),i={x:b[0]-a.sourceEvent.movementX*h,y:b[1]-a.sourceEvent.movementY*h},j=v.GS.translate(i.x,i.y).scale(b[2]),k=d.constrain()(j,[[0,0],[f,g]],e);d.transform(c,k)}:null).on("zoom.wheel",r?a=>{let{transform:b,d3Selection:c,d3Zoom:d}=A.getState();if("wheel"!==a.sourceEvent.type||!c||!d)return;let e=-a.sourceEvent.deltaY*(1===a.sourceEvent.deltaMode?.05:a.sourceEvent.deltaMode?1:.002)*y,f=b[2]*Math.pow(2,e);d.scaleTo(c,f)}:null);return a.call(b),()=>{a.on("zoom",null)}}},[q,r,t,y]);let U=o?a=>{let b=(0,x.A)(a);o(a,{x:b[0],y:b[1]})}:void 0,V=p?(a,b)=>{p(a,A.getState().nodeInternals.get(b))}:void 0;return l.createElement(O,{position:n,style:a,className:m(["react-flow__minimap",b]),"data-testid":"rf__minimap"},l.createElement("svg",{width:F,height:G,viewBox:`${N} ${P} ${Q} ${R}`,role:"img","aria-labelledby":S,ref:B,onClick:U},s&&l.createElement("title",{id:S},s),l.createElement(c$,{onClick:V,nodeColor:d,nodeStrokeColor:c,nodeBorderRadius:f,nodeClassName:e,nodeStrokeWidth:g,nodeComponent:h}),l.createElement("path",{className:"react-flow__minimap-mask",d:`M${N-K},${P-K}h${Q+2*K}v${R+2*K}h${-Q-2*K}z
        M${D.x},${D.y}h${D.width}v${D.height}h${-D.width}z`,fill:i,fillRule:"evenodd",stroke:j,strokeWidth:k,pointerEvents:"none"})))}c0.displayName="MiniMap";var c1=(0,l.memo)(c0);c(17163);var c2=c(11489),c3=c(23673),c4=c(23339);let c5=(0,c4.A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),c6=(0,c4.A)("gamepad-2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);var c7=c(18004),c8=c(67748);let c9=(0,c4.A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),da=(0,c4.A)("plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]),db=(0,c4.A)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);var dc=c(65783),dd=c(81925),de=c(75234),df=c(72567),dg=c(16359),dh=c(23374),di=c(45861),dj=c(8150);let dk=(0,c4.A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),dl=(0,c4.A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),dm=(0,l.memo)(({data:a})=>{let[b,c]=(0,l.useState)(!1),d=a.icon;return(0,k.jsxs)("div",{className:`rounded-lg ${"word"===a.type?"px-3 py-2":"p-3"} cursor-pointer transition-all duration-300 hover:scale-105`,style:(()=>{switch(a.type){case"root":return{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",width:"200px",minHeight:"80px",fontSize:"16px",fontWeight:"bold",boxShadow:"0 10px 30px rgba(102, 126, 234, 0.3)"};case"category":return{background:a.bgColor||"#f3f4f6",color:a.color||"#374151",width:"180px",minHeight:"70px",border:`2px solid ${a.color||"#9ca3af"}`,boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)"};case"word":return{background:`${a.bgColor||"#f3f4f6"}`,color:a.color||"#374151",width:"auto",minWidth:"60px",padding:"6px 12px",fontSize:`${a.size||14}px`,fontWeight:"500",border:`2px solid ${a.color||"#9ca3af"}`,boxShadow:`0 0 12px ${a.color||"#9ca3af"}40`,cursor:"pointer",opacity:a.opacity||1,transition:"all 0.3s ease"};case"entry":return{background:(a=>a>=4?"linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%)":a>=3?"linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)":a>=2?"linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)":"linear-gradient(135deg, #cfd9df 0%, #e2ebf0 100%)")(a.emotionScore||3),color:"#1f2937",width:"160px",minHeight:"60px",fontSize:"12px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)"};default:return{}}})(),onClick:()=>"entry"===a.type&&c(!b),children:[(0,k.jsx)(aU,{type:"target",position:i.Top,style:{background:"#555",width:8,height:8}}),(0,k.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[d&&"category"===a.type&&(0,k.jsx)(d,{className:"w-6 h-6 mb-2",style:{color:a.color}}),"root"===a.type&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(de.A,{className:"w-8 h-8 mb-2"}),(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsx)("div",{children:a.label}),a.count&&(0,k.jsxs)("div",{className:"text-sm opacity-90 mt-1",children:[a.count,"件の日記"]})]})]}),"category"===a.type&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:"font-semibold",children:a.label}),a.count&&(0,k.jsxs)("div",{className:"text-sm mt-1 opacity-80",children:[a.count,"件"]}),a.entries&&a.entries.length>5&&(0,k.jsxs)("div",{className:"text-xs mt-1 opacity-60",children:["他",a.entries.length-5,"件..."]})]}),"entry"===a.type&&(0,k.jsxs)(k.Fragment,{children:[a.date&&(0,k.jsxs)("div",{className:"flex items-center gap-1 text-xs opacity-70 mb-1",children:[(0,k.jsx)(df.A,{className:"w-3 h-3"}),a.date]}),(0,k.jsx)("div",{className:`text-center ${b?"":"line-clamp-2"}`,children:a.label}),a.fullContent&&(0,k.jsx)("div",{className:"flex justify-center mt-1",children:b?(0,k.jsx)(dk,{className:"w-4 h-4 opacity-50"}):(0,k.jsx)(dl,{className:"w-4 h-4 opacity-50"})}),b&&a.fullContent&&(0,k.jsx)("div",{className:"text-xs mt-2 p-2 bg-white/50 dark:bg-black/20 rounded max-h-32 overflow-y-auto",children:a.fullContent})]}),"word"===a.type&&(0,k.jsx)("div",{className:"text-center font-medium",children:a.label})]}),(0,k.jsx)(aU,{type:"source",position:i.Bottom,style:{background:"#555",width:8,height:8}})]})});dm.displayName="MergedDiaryNode";let dn={WORK:"仕事",FAMILY:"家族",FRIENDS:"友達",HOBBY:"趣味",HEALTH:"健康",RELATIONSHIP:"人間関係",GROWTH:"成長",FINANCE:"金銭",TRAVEL:"旅行",EDUCATION:"学習"},dp={[dn.WORK]:{icon:c2.A,color:"#3b82f6",bgColor:"#dbeafe"},[dn.FAMILY]:{icon:c3.A,color:"#ef4444",bgColor:"#fee2e2"},[dn.FRIENDS]:{icon:c5,color:"#10b981",bgColor:"#d1fae5"},[dn.HOBBY]:{icon:c6,color:"#8b5cf6",bgColor:"#ede9fe"},[dn.HEALTH]:{icon:c7.A,color:"#22c55e",bgColor:"#dcfce7"},[dn.RELATIONSHIP]:{icon:c3.A,color:"#f59e0b",bgColor:"#fed7aa"},[dn.GROWTH]:{icon:c8.A,color:"#06b6d4",bgColor:"#cffafe"},[dn.FINANCE]:{icon:c9,color:"#84cc16",bgColor:"#ecfccb"},[dn.TRAVEL]:{icon:da,color:"#ec4899",bgColor:"#fce7f3"},[dn.EDUCATION]:{icon:db,color:"#6366f1",bgColor:"#e0e7ff"}},dq={merged:dm};function dr(){let[a,b,c]=cD([]),[e,f,g]=cE([]),[i,j]=(0,l.useState)([]),[m,n]=(0,l.useState)("month"),[o,p]=(0,l.useState)(!1),[q,r]=(0,l.useState)(null),s=async()=>{p(!0);try{let a=[...i],c=new Date;switch(m){case"month":let d=(0,dh.w)(c),e=(0,di.p)(c);a=i.filter(a=>{let b=new Date(a.entryDate);return b>=d&&b<=e});break;case"3months":let g=(0,dj.a)(c,3);a=i.filter(a=>new Date(a.entryDate)>=g);break;case"year":let j=(0,dj.a)(c,12);a=i.filter(a=>new Date(a.entryDate)>=j)}let k=new Map,l=new Map;a.forEach(a=>{(a=>{let b=[];return Object.entries({[dn.WORK]:["仕事","メール","会議","業務","会社","プロジェクト","残業","職場"],[dn.FAMILY]:["家族","子供","親","母","父","兄","弟","姉","妹","夫","妻"],[dn.FRIENDS]:["友達","友人","仲間","同僚","先輩","後輩"],[dn.HOBBY]:["趣味","映画","読書","小説","ゲーム","音楽","スポーツ","料理"],[dn.HEALTH]:["健康","病気","熱","風邪","運動","散歩","ジム","薬","病院"],[dn.RELATIONSHIP]:["恋愛","彼氏","彼女","デート","結婚","離婚"],[dn.GROWTH]:["成長","学習","勉強","挑戦","目標","達成","成功","失敗"],[dn.FINANCE]:["お金","給料","貯金","投資","買い物","節約"],[dn.TRAVEL]:["旅行","旅","観光","海外","国内","ホテル","飛行機"],[dn.EDUCATION]:["勉強","学習","資格","試験","授業","講座","セミナー"]}).forEach(([c,d])=>{d.some(b=>a.includes(b))&&b.push(c)}),0===b.length&&b.push(dn.GROWTH),b})(a.content||"").forEach(b=>{k.has(b)||k.set(b,[]),k.get(b).push(a)})}),k.forEach((a,b)=>{let c=a.map(a=>a.content||"").join(" "),d=((a,b,c=8)=>{let d={[dn.WORK]:[/会議|ミーティング|打ち合わせ/g,/プロジェクト|案件|タスク/g,/残業|締切|納期/g,/上司|部長|同僚|チーム/g,/資料|レポート|報告書/g,/メール|電話|連絡/g],[dn.FAMILY]:[/[息娘]子|子供|赤ちゃん/g,/[夫妻]|パパ|ママ/g,/[父母]親|祖[父母]/g,/家族|実家|帰省/g,/誕生日|記念日/g],[dn.FRIENDS]:[/友[達人]|仲間/g,/飲み会|パーティー|集まり/g,/遊び|カラオケ/g,/LINE|連絡|電話/g],[dn.HOBBY]:[/映画|ドラマ|アニメ/g,/音楽|ライブ|コンサート/g,/ゲーム|PS|Switch/g,/読書|小説|漫画|本/g,/料理|レシピ|お菓子/g],[dn.HEALTH]:[/運動|ジム|筋トレ|ランニング/g,/体調|風邪|熱|頭痛/g,/病院|診察|薬/g,/睡眠|疲れ|ストレス/g,/ダイエット|体重/g],[dn.RELATIONSHIP]:[/彼[氏女]|恋人|パートナー/g,/デート|約束/g,/愛|好き|大切/g,/結婚|将来|夢/g],[dn.GROWTH]:[/目標|計画|達成/g,/勉強|学習|資格/g,/成長|向上|改善/g,/挑戦|チャレンジ/g],[dn.FINANCE]:[/給料|ボーナス|収入/g,/貯金|節約|お金/g,/買い物|購入|支払/g,/家計|生活費/g],[dn.TRAVEL]:[/旅行|観光|ツアー/g,/ホテル|宿泊/g,/飛行機|新幹線|電車/g,/[温泉]|観光地/g],[dn.EDUCATION]:[/授業|講義|セミナー/g,/宿題|課題|レポート/g,/試験|テスト|受験/g,/先生|教授|講師/g]}[b]||[],e=new Set;d.forEach(b=>{let c=a.match(b);c&&c.forEach(a=>{a&&a.length>=2&&a.length<=10&&e.add(a)})});let f=a.match(/\d+[時間日分キロメートル円万]/g);f&&b===dn.WORK&&f.slice(0,2).forEach(a=>e.add(a));let g=a.match(/[月火水木金土日]曜日/g);return(g&&(b===dn.WORK||b===dn.FRIENDS)&&g.slice(0,2).forEach(a=>e.add(a)),0===e.size)?({[dn.WORK]:["仕事","業務","タスク","会社"],[dn.FAMILY]:["家族","家庭","子供","両親"],[dn.FRIENDS]:["友達","仲間","友人","交流"],[dn.HOBBY]:["趣味","楽しみ","遊び","リラックス"],[dn.HEALTH]:["健康","体調","運動","休息"],[dn.RELATIONSHIP]:["関係","恋愛","パートナー","感情"],[dn.GROWTH]:["成長","目標","学習","挑戦"],[dn.FINANCE]:["お金","貯金","収支","経済"],[dn.TRAVEL]:["旅","移動","観光","発見"],[dn.EDUCATION]:["学習","知識","勉強","教育"]})[b]||[]:Array.from(e).slice(0,c)})(c,b,8);l.set(b,d)}),r({categories:k,totalEntries:a.length,period:m});let n=[],o=[],p={id:"root",type:"merged",position:{x:0,y:0},data:{label:t(m),type:"root",count:a.length,emotionScore:3}};n.push(p);let q=2*Math.PI/k.size,s=0;Array.from(k.entries()).forEach(([a,b])=>{let c=s*q,d=300*Math.cos(c),e=300*Math.sin(c),f=dp[a],g=`category-${a}`;n.push({id:g,type:"merged",position:{x:d,y:e},data:{label:a,type:"category",icon:f.icon,color:f.color,bgColor:f.bgColor,count:b.length,entries:b}}),o.push({id:`edge-root-${g}`,source:"root",target:g,type:"smoothstep",animated:b.length>3,markerEnd:{type:h.ArrowClosed,width:20,height:20,color:f.color},style:{stroke:f.color,strokeWidth:Math.min(.8*b.length,4),strokeOpacity:.8}});let i=l.get(a)||[],j=2*Math.PI/Math.max(i.length,1);i.forEach((b,c)=>{let i=c*j,k=150+(80*Math.random()-40),l=d+k*Math.cos(i),m=e+k*Math.sin(i),p=`word-${a}-${c}`,q=.8+.2*Math.random(),r=10*Math.random()+14;n.push({id:p,type:"merged",position:{x:l,y:m},data:{label:b,type:"word",category:a,color:f.color,bgColor:f.bgColor,size:r,opacity:q}}),o.push({id:`edge-${g}-${p}`,source:g,target:p,type:"straight",animated:!0,markerEnd:{type:h.ArrowClosed,width:10,height:10,color:f.color},style:{stroke:f.color,strokeWidth:1.5,strokeOpacity:.6,strokeDasharray:"3,3"}})}),s++}),b(n),f(o)}catch(a){console.error("マインドマップ生成エラー:",a)}finally{p(!1)}},t=a=>{switch(a){case"month":return`今月の人生マップ`;case"3months":return`過去3ヶ月の人生マップ`;case"year":return`今年の人生マップ`;case"all":return`人生の全体マップ`;default:return"人生マップ"}};return(0,k.jsxs)("div",{className:"h-screen flex flex-col bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 dark:from-gray-900 dark:via-purple-900/20 dark:to-gray-900",children:[(0,k.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow-sm px-6 py-4",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,k.jsx)(dc.A,{className:"w-6 h-6 text-purple-500"}),"統合マインドマップ"]}),(0,k.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"日記をカテゴリー別に分類して人生の全体像を可視化"})]}),(0,k.jsxs)("div",{className:"flex items-center gap-4",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)(dd.A,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),(0,k.jsxs)("select",{value:m,onChange:a=>n(a.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,k.jsx)("option",{value:"month",children:"今月"}),(0,k.jsx)("option",{value:"3months",children:"過去3ヶ月"}),(0,k.jsx)("option",{value:"year",children:"過去1年"}),(0,k.jsx)("option",{value:"all",children:"全期間"})]})]}),(0,k.jsxs)(dg.$,{onClick:s,disabled:o,className:"gap-2",children:[(0,k.jsx)(de.A,{className:"w-4 h-4"}),o?"分析中...":"再生成"]})]})]}),q&&(0,k.jsxs)("div",{className:"mt-4 flex gap-4 text-sm",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)(df.A,{className:"w-4 h-4 text-gray-500"}),(0,k.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[q.totalEntries,"件の日記"]})]}),(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)(dc.A,{className:"w-4 h-4 text-gray-500"}),(0,k.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[q.categories.size,"個のカテゴリー"]})]})]})]}),(0,k.jsx)("div",{className:"flex-1",children:o?(0,k.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),(0,k.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"日記を分析してカテゴリーに分類中..."})]})}):(0,k.jsxs)(cB,{nodes:a,edges:e,onNodesChange:c,onEdgesChange:g,nodeTypes:dq,connectionMode:d.Loose,fitView:!0,className:"bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 dark:from-gray-900 dark:via-purple-900/20 dark:to-gray-900",children:[(0,k.jsx)(cL,{}),(0,k.jsx)(cU,{}),(0,k.jsx)(c1,{})]})}),(0,k.jsx)("div",{className:"bg-white dark:bg-gray-800 px-6 py-3 border-t",children:(0,k.jsxs)("div",{className:"flex gap-4 items-center flex-wrap",children:[(0,k.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"カテゴリー:"}),Object.entries(dp).map(([a,b])=>{let c=b.icon;return(0,k.jsxs)("div",{className:"flex items-center gap-1",children:[(0,k.jsx)(c,{className:"w-3 h-3",style:{color:b.color}}),(0,k.jsx)("span",{className:"text-xs",style:{color:b.color},children:a})]},a)})]})})]})}function ds(){return(0,k.jsx)(ct,{children:(0,k.jsx)(dr,{})})}},51472:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>j,metadata:()=>h,viewport:()=>i});var d=c(75338),e=c(18039),f=c.n(e);c(61135);var g=c(15073);let h={title:"AI Diary - あなたの思い出を記録",description:"AIが支援する次世代の日記アプリケーション",manifest:"/manifest.json"},i={themeColor:"#3b82f6",width:"device-width",initialScale:1,maximumScale:1};function j({children:a}){return(0,d.jsx)("html",{lang:"ja",children:(0,d.jsx)("body",{className:f().className,children:(0,d.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,d.jsx)(g.Header,{}),(0,d.jsx)("main",{className:"container mx-auto px-4 py-8",children:a})]})})})}},58390:(a,b,c)=>{"use strict";c.d(b,{a:()=>e});var d=c(36950);function e(a,b){return(0,d.w)(b||a,a)}},61135:()=>{},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},72567:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},75234:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]])},76386:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},94538:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))}};var b=require("../../webpack-runtime.js");b.C(a);var c=b.X(0,[586,165,273,966],()=>b(b.s=1730));module.exports=c})();